# Motherboard

## Subsystems
![[Pasted image 20210228152845.png]]

### Connection to FPGA Board
[[FPGA Board]]
- Connected over M.2 (will require multiple)
- Switch inputs (21 Lines)
- RGB LEDs (63 Lines)
- Power
- PCIE Boot card
- Display (27 Lines)

### Power **Break this out into it's own document**


Battery Management
- Charge
- Balance (if multiple cells)
- Undervoltage protection (power down)
- Charge percentage

**TODO Select Battery**

**RAILS**

FPGA Rails
[[FPGA Board]]

| Rail     | Voltage | Current |
| -------- | ------- | ------- |
| Vccint   | 1V      | 328mA   |
| Vccaux   | 1.8V    | 73mA    |
| Vccbram  | 1V      | 11mA    |
| Vcco     | 3.3v    | 5mA     |
| Vccbat   | 0V      |         |
| Vmgtavcc | 1V      | 12mA    |
| Vmgtavtt | 1.2V    | 12mA    |
| Vccadc   | 1.8V    |         |
| Vrefp    | 1.25V   | 15uA    |

RAM Rails
[[FPGA Board]]

| Rail   | Voltage | Current | Notes                                |
| ------ | ------- | ------- | ------------------------------------ |
| Vdd    | 1.5V    | 2.3A    | current is peak and varies by module |
| Vddspd | 3.3V    | 2mA     | likely won't be hooked up            |
| Vrefca | 0.75V   | 18uA    |                                      |
| Vrefdq | 0.75V   | 18uA    |                                      |
| Vtt    | 0.75V   | 600mA   | specifies a min I of -600mA          |

Display Rails
[[LCD Display]]

| Rail      | Voltage | Current | Notes                    |
| --------- | ------- | ------- | ------------------------ |
| Vcc       | 3v3     | 5mA     | 5mA should be peak       |
| Backlight | 5v      | 30mA    | should be lowe than 30mA |

LED Driver Rails
[[LED + Driver]]

| Rail | Voltage | Current | Notes                  |
| ---- | ------- | ------- | ---------------------- |
| Vcc  | 5V      | 0.5A    | each led is peak 110mA |

### LED + Driver
[[LED + Driver]]
- one RGB LED per switch (21 RGB LEDs 63 LEDs (21 x 3)) (consider driving with a decoder and charlieplexed array)
- Additional RGB around the design

### Wireless Charger
- Qi Charging 

### LCD Display
- Serial control from FPGA
- Clock generated by FPGA

### Ribbon Expansion
- Ability to add a coprocessor (microcontroller)
- Ability to add an ADC

### PCIE Boot
- EEPROM bootcard 
- ability to flash cards from vivado
- easily swapped in and out

### Switches
- 21 switches
- Reed switch for power on power off (switch using a MOSFET)
- whatever is required to get the switches to interact with the FPGA properly

