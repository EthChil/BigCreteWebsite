{"/BigCreteCalculator/Design-Journal":{"title":"Untitled Page","content":"---\ntitle: \"Journal\"\ndraft: \"true\"\n---\n\nStream of conciousness for project allows me to keep track of what I've done and is a digital scratchpad\n\nApril 29th, 2021\n- Doing design work before I start at NVIDIA\n- Current status\n\t- SPD breakout board designed and arrived I know the pinout is for DDR3 and not DDR3L which may affect the ability for it to be used\n\t- LCD Display breakout is finished being designed just needs to be ordered\n\t- LED Breakout is not designed schematic or layout\n\t- Power is not designed schematic or layout\n\n- By the end of today I want to have the LED breakout designed and laid out\n- If possible I'd also like to start working on the power circuitry\n- I may get cut short since I have a new computer arriving and I may get caught up setting that up\n\nMay 2nd, 2021\n- I got caught up setting up my new workspace and computer\n- None of the items from the previous logs were done at all and remain outstanding\n- For today I plan to complete the schematic for the LED breakout using the LTSpice simulations I did from HOLO as a reference since that seemed to work fairly well\n\nMay 3rd, 2021\n- Today was my first day at NVIDIA \n- Yesterday I looked at the ltspice sims for the LED driver circuitry\n- Today I plan on taking a look at the breadboard I made for that and modifying the circuit and doing additional analysis\n- I'll attach the math for that analysis here\n\nMay 5th, 2021\n- So I continue to be pushed off what I'm doing hopefully today will be different\n- So looking at all the things I said I would do here is the task for today \n- First I will go through on my iPad and generate a schematic for the driver circuitry that I agree with showing math\n- I generated some designs on my iPad then shifted to producing footprints and selecting components, at the moment I still need to finish the footprint for the gateron switches\n\nMay 9th, 2021\n- so today the goal is to finish the footprints the schematic then layout the LED Driver board which will also have key switch stuff\n- If I have time I also want to fix the SPD breakout and reorder it\n- So update I was able to finish the schematic layout and made a top level with the connections for the breakout, next step is to route all of it likely tomorrow? I should have time then\n\n\tjust as a note below is the plan\n\t- SPD breakout (needs stencil)\n\t- Display breakout no stencil (maybe for the connector)\n\t- LED Driver no stencil (assembly tho)\n\nMay 10th, 2021\n- today I discovered that I've been structuring my altium stuff all wrong so I'm currently restructuring it\n- additionally I appear to have lost the schematic for the display driver breakout, kinda akward (looks like it was in my downloads on my other computer, i'll retrieve it later)\n\nMay 11th\n- I pulled the schematic for the LCD off my previous computer now I guess it's time to restructure the files properly\n- Files have been restructured and I properly laid out the display driver and found some issues with the schematic along the way\n\nMay 12th\n- only thing outstanding from the layout was fixing up the silkscreen that is now down and the board is ready to be ordered\n\n\tCurrent tasks \n\t- rewire SPD breakout\n\t- prepare gerber for SPD breakout\n\t- prepare gerber for LED Driver\n\t- prepare required placement files for LED Driver\n\tBoards for Breakout Version\n\t- SPD Breakout (not part of calculator needed for programming)\n\t- LED and Switch breakout\n\t- LCD Breakout\n\t- Power Breakout (includes BMS circuitry)\n\t- Wireless Charging Breakout\n\t- Configuration card breakout\n\nMay 17th\n- Fixed issue with the keys being incorrectly laid out on the bottom row\n- as a note the issue with the SPD was that I wired it for ECC DDR3L this mistake was not made on the A200T ram\n\nMay 23rd\n- I think I forgot to note it in this journal but the SPD breakout was rewired for DDR3L without ECC however I recall some form of issue with the nets not mapping properly to the pcb\n- yea so the issue is that Vtt, Vss, Vrefdq, Vdd aren't mapping onto the pcb\n- just required an import the issue is gone must've been a small bug\n\n\tCurrent tasks \n\t- Layout SPD Breakout\n\t- prepare gerber for SPD breakout\n\t- prepare gerber for LED Driver\n\t- prepare required placement files for LED Driver\n\t- finish schematic for FPGA board\n\tBoards for Breakout Version\n\t- SPD Breakout (not part of calculator needed for programming) (SCHEMATIC DONE)\n\t- LED and Switch breakout (LAID OUT)\n\t- LCD Breakout (LAID OUT)\n\t- Power Breakout (includes BMS circuitry)\n\t- Wireless Charging Breakout\n\t- Configuration card breakout\n\t- FPGA board\n\nMay 31st\n- Task for today is to finish the SPD breakout layout\n- clean up the fpga board and highlight what power lines are needed (note this in obsidian for the power board)\n- start designing the power board\n- SPD breakout has been laid out it now just needs gerbers generated and it's good for manufacture\n\nJune 1st\n- With the SPD board done the next task is to look over the FPGA board and highlight the power lines that will be fed from the power board\n\nJune 4th\n- broke out the lines and created a new power subcircuit document\n- Developed plan for how the rails will be powered and current allowances\n- I also pulled the regulation tolerance data from the datasheets for the components\n- I was going to start looking at components on digikey but the websites filters are having issues\n- contacted jlc and determined speedgrade is -2 and the unit is industrial meaning the voltage is 1V\n\nJune 6th \n- Started selecting power ICs and testing them out in ltspice\n- Running into issues with Digikey (started friday night)\n\nJune 18th\n- Started schematic layout for power board\n- Splitting bms into seperate board\n- adding USB-C power in addition to wireless power (wireless will be fully custom)\n- Adding current and voltage monitoring to power board (mostly for initial debug and bringup)\n- Issue with schematic right now is I'm not exactly using the correct components, I need to get the online library I had reinstalled that was dope\n\nJune 19th\n- noticed in LTSpice that some lower voltages cause regulation to drop out on the 5v rail this probably can be fixed by using a smaller inductor, for now UVLO circuitry will be added so the rails dropout at anything below 7V into the regulator (3.5V cell voltage)\n\nJune 25th \n- Deadline for boards to get ordered is this sunday (27th)\n- split up the power boards, at the least I want the power subcircuit board done, followed by bms, then monitoring board\n\nBoards for Order (BRIAN)\nREADY: Ram breakout (SPD)\nREADY: LCD Display Breakout\nIN-PROGRESS: Power subcircuit (Buck + Linear Reg)\nIN-PROGRESS: Voltage / current breakout (monitoring for 9 rails per [[Power Subcircuit]])\nIN-PROGRESS: BMS subcircuit (USB-C plug, charging IC, passthrough from battery / USB-C)\n\nBoards for Order (ETHAN)\nLED + Driver\nFPGA Board (IN PROGRESS)\n\nOther:\nWireless charging, (likely for post prototype)\n\nJune 26th\n- Starting to go through these items first up is power subcircuit \n- Power subcircuit schematic appears to be done, I also had to minorly rearchitect for power up sequence and also because my rails were too close to the buck ones for LDOs to work properly \n- Now working on layout\n- Got about halfway through layout\n\nJune 27th\n- Finished layout\n- One issue with VIN is that I didn't leave enough room to route big enough traces\n- as it stands it WILL work but I want to solder patch wires from the caps on the left and right inductors so just make sure you do that before assembly \n- I also put in mounting holes spaced 1.5\" apart and sized for a #4 fastener \n\nBoards going out for order today\nREADY: Ram breakout (SPD)\nREADY: LCD Display Breakout\nREADY: Power subcircuit (Buck + Linear Reg)\nREADY: LED + Driver\n\n\nJuly 8th\nGot boards in\nAssembled SPD board, reflow seemed to work out fine I had to touch it up with the iron a bit\n\nswitch board\n- switches are a bit tight going in this should be investigated for V2\n- enter and plus key collide, check spacing I think the plus key is too low the enter looks fine\n- Stabilizers were missed on this design make sure that's in V2\n\nRAM Notes\n- couldn't find info for Trefi and Tcke timings so 4us is being used for Trefi and 5ns for Tcke\n\n- When redoing the vivado stuff noticed an issue with obsidian linking of RAM connections but there was also an error in altium so double check vivado/atlium/obsidian and make sure they all agree\n\n- Updtaed vivado to meet -2 timing requirments on FPGA and fixed some timing issues with the ram\n\nNotes for next time:\n- Focus on getting FPGA board ordered (Schematic then layout)\n- Verify ram connections are correct (vivado/atlium/obsidian)\n- Get FPGA boards ordered asap maybe order a run of 1 for now then if design verified order another each is like probably ~$200 CAD\n\n\nJuly 9th\n- Having issues sourcing the FPGA I need, JLC doesn't have it and all A200T FPGAs are out of stock literally everywhere\n- For now I will work under the assumption that I am getting the FPGA I've been designing for, hopefully this will reduce the risk of mistakes in the design\n- For today I will work on routing the FPGA and doing all the schematic related things for it\n\nJuly 10th\n- Got stuck in a rabit hole looking at pinout info for the chip which sorta exists not really tho\n- Validate ram pinout is top priority \n- Then deal with all the config pins and what they are and what they should be tied to\n- Determine what other pins are required for what (SPI BOOT, JTAG, SPI Storage, External Interfaces)\n\nJuly 12th\n- Ordered FPGA from mouser P/N XC7A200T-1SBG484C\n- Vivado was rebuilt for the new part but is giving some warnings\n\nJuly 13th\n- FPGA arrived a lot smaller than I expected, I don't think I'm putting in any time today but if I do I think the next step is going to be doing the pinout, the challenge with this however is there is the pinout from the board itself, the pinout to the FPGA and the pinout from big parts like SPI and ram. My thinking is to make a sperate pinout document for each device so every component has it's own unified pinout table this means getting rid of the row system I had before. I'll make sure I focus on doing this, once it's done I'll have to redo the schematic anyways with the new circuit element since this FPGA is not the same as JLC and I will also have to look into what PCBWay wants and what their design rules are around BGA components. \n\nJuly 15th\n- Ordered syringes for solder paste\n- Redid the schematic for the FPGA to put the new part in and rewired the RAM\n- Created an excel sheet with the pinout info\n- Broke out the SPI configuration pins for boot, this needs to be implemented properly next time, copy the AU design\n- Pins for the M.2 Connection need to be decided on and plumbed\n- testpoint the INIT, PROGRAM, DONE, CFGBVS, and PUDC lines\n- ADD THE OSCILLATOR 100mhz\n\n\nJuly 16th\n- PCBWAY STUFF (what to get)\n\t- 0.25mm (10mil) vias, plated 0.48mm (19mil)\n\t- 4-3 mil traces (select 4/4 or 3/3) (4/4 is cheaper)\n\t- trace spacing \n\t\t- One trace 4mil\n\t\t- Two trace 3mil\n\n- REFER to BGA design rules when setting up the board stuff'\n\nhttps://www.altium.com/documentation/altium-designer/controlled-impedance-routing-ad\n^ controlled impedance routing in altium\n\nJuly 28th\n- took a bit of a break, I think the current stuff to do is mount the crystal and wire up the boot rom\n\nJuly 29th\n- so I missed this from yesterdays update but I wired up the boot rom the one thing that is missing is any form of termination resistor this should be fine if you run at a lower frequency since boot time isn't a concern\n\nAugust 11th\n- Finished wiring up the FPGA pretty much, a few notes \n\t- The wiring for things that go to GPIO such as the switch board and the display will need a more robust writeup on which gpio is which\n\t- pretty much every GPIO got wired and about half the EIOs got wired\n\t- should probably do the breakout board for the FPGA before actually laying the FPGA out since the layout will take a long time and the schematics should be done first\n\nAugust 12th\n- Did some mechanical stackup for the calculator, created new boards\n- Switch board holds LED drivers, test points, mechanical mounts (mechanical support structure)\n- Motherboard is above switch board and has power delivery, boot card, USB-C connection, Display connection, battery hookup, FPGA hookup\n- Started putting rules together in the altium\n\nNotes on Rules set\nmin hole size = 0.25mm (XILINX DOC)\nrouting width and spacing 4/4 (XILINX DOC) space for one trace between balls\n6 layer stackup\n\n\nAugust 15th\n- routing has begun on the FPGA, assembled the power breakout and started testing found the following issue\n\t- Rt, the resistor that tunes the frequency was 26.3 ohms it should have been 26.3k ohms I ordered a 26.7k ohm resistor to swap it out with\n\n\nAugust 18th\n- After swapping resistor still having issues wasn't seeing any switching on the output to the inductor\n- so I removed the chip from the board and swapped it with a new one\n- Preliminary tests showed the 5v and 1v8 lines working as intended\n- I also severed the connection from the TRKSS2 to PG3 which was required for the sequencing this doesn't affect 3v3 as it will still come up but it does mean that it will come up probably before the 1v8 line which is technically the wrong sequence just be aware of it\n\nAugust 19th\n- Checked the 3v3 and 1v5 lines they seem to be working. The voltages don't seem to be very accurate so this will need to be validated and potentially tuned\n-\nAugust 28th \n- Went into altium and fixed the issue that was causing the keys to collide the + and enter keys. This will be carried forward to the next rev of the board\n- Added 3D switch model to PCB so I can do some mechanical CAD\n\nOctober 13th\n- to simplify initial calculator plan using the AU in place of the custom FPGA board I was designing\n- Also plans to make a mass market version based on the numworks calculator https://github.com/numworks/epsilon/tree/version-16\n\nOctober 14th \n- weird battery is 3.2ish volts discharged\n\n\nJune 11th (major bruh)\n\nMajor things that need to be documented here\n- Battery splitter\n- what is needed to run the display with the AU (minimum just to test)\n- Buck convertor CAD\n\n\nAugust 16th\n\nOkay so now I'm at home and ready to start real work again, the in progress portions of this that I can work on are as follows\n- Assembled switch board needs to be tested (make up a test plan for this circuit)\n- Unassembled but designed battery splitter (this may have an issue with the charging circuit but it should be tested regardless)\n- adafruit display breakout hookup to alchitry and test screen\n\t- Digital design for testing displays needs to be done up\n\t- This also needs to be wired\n\nAugust 17th\n- Work on display driving and validate switch board\n\nDisplay driver\n- The alchitry has 36 pins soldered to the Br board\n- R1-8, G1-8, B1-8, 5V, GND, ON/OFF, CLK, VSYNC, HSYNC, DE (32 connections)\n- PWM is used to control the shutdown pin on the FAN5333 which would allow for reducing the current I don't think this will be needed\n- Default current is 25mA\n\nSwitch board testing\n- solder one line of switches \n- hook arduino up and read one line of switches \n- hook one led in \n- Use arduino to drive LED\n\nFor the switch board I soldered on headers one row of switches and populated R1 with 10kOhm and R2 with 58 Ohm this should allow 9mA to flow through the LED when on\n\nAugust 18th \n- Setup new computer which will allow for cleaner work between lab and desk\n- Reorganized hardware folder to show distinction in hardware versions\n- Starting tests on switch board with single line\n- Missing pulldown resistors are causing values to float when highz on high side line, patch pulldowns were added to each of the SWL lines of value 10kOhm\n- Using pulldowns the issue was solved\n\nRunning list of issues for Switch and LED Driver\n- keyswitch spacing\n- Pulldowns on SWL lines (add 10ks to each line)\n\nAugust 19th\n- Analyzed the situ with the decoders and I'm moving forward with an initial test running the circuit with enable pulled high to disable them \n- First test is being done with AN1 and Ca0-2\n- This decodes to HS1 and LS2-4\n- That means on the inputs LSG0 high and HSG 0100 -\u003e 1100 -\u003e 0010\n\nRunning list of issues for Switch and LED Driver\n- keyswitch spacing\n- Pulldowns on SWL lines (add 10ks to each line)\n- **new** LS labeling is not consistent with CA labelling, draw out a table and make this consistent\n- **new** LSG and HSG swapped on inputs to decoder\n- **new** Why does LSG 0-\u003e1 on the connector then HSG 3-\u003e0 ? idiot\n- **new** Add a petentiometer pad for tuning brightness\n- **new** to prevent human error on decoder add jumper to cut power, this will be helpful for debugging on the alchitry backpack\n- earlier from the journal stabilizers need to be considered which are PCB mounted\n\n- tested S6 LED and verified that all colours are working with, 68ohm resistor for current set it's fairly bright I'm not sure if the current needs to be increased further\n- measured 0.59V across 68ohm current set resistor meaning there is 8.67mA of current through the LED\n- Wire up full row of LEDs and do a brightness check PWMing between them\n- Full row wired and tested \n- Doubled current capacity by adding a second 68ohm in parallel and the LEDs seem brighter but it's hard to say, I think adding a petentiometer would be helpful but I just need to be careful of current through said petentiometer\n- I think the next step is to incorporate these design fixes into the CAD before I forget and rev it up for V2 REV1 for alchitry backpack\n\n- Started work on switch board, I've decided that in the interest of compactness the switchboard will connect via FFC to the mainboard \n\nProgress on issues\n- keyswitch spacing (plus and enter) (in board)\n- Pulldowns on SWL lines (add 1ks to each line) (in schematic)\n- **new** LS labeling is not consistent with CA labelling, draw out a table and make this consistent (fixed in schematic and board)\n\t- **new** LSG and HSG swapped on inputs to decoder (fixed and renamed)\n- **new** Why does LSG 0-\u003e1 on the connector then HSG 3-\u003e0 ? idiot\n- **new** Add a petentiometer pad for tuning brightness\n- **new** to prevent human error on decoder add jumper to cut power, this will be helpful for debugging on the alchitry backpack\n- earlier from the journal stabilizers need to be considered which are PCB mounted\n\n\nSeptember 4th\n- Started printing mockups to check stabilizer mounting\n- Online cherry plate cutouts don't work for my stabilizers I have a new test print that needs to be made\n- rudimentary stackup was completed in solidworks, it is now a single board design\n- battery count was reduced from 2 to 1 and a boost convertor will be used instead this simplifies the charging circuitry\n- mock board for checking display cable alignment was printed\n- outline for what is needed for the pcb was made, the PCB can now be made \n- Steps for today are\n\n1. update issue list made for the switchboard breakout\n2. print new top plate to test fit with stabilizers (print a new mock pcb also for a better fit)\n3. document findings on display cable mount\n4. get top panel ready to be cut on the CNC \n5. test display with adafruit display breakout and alchitry (determine if backlight circuit is adequete)\n\nFindings from screen jig\nFFC from LCD interferes with one of the plugs for the alchitry, best solution is to avoid using this header (verify this is possible)\ngap wire runs through is too long\nforget to account for screen offset for the cable and it doesn't align with the plug\n\n\nSept 5th \n\n- Hooked up display to adafruit controller and backlight is clearly illuminating, this is a great sign\n- In theory I can hook the remainder of the wires and start drawing shapes\n- using breadboard that arrived today I finished hooking the display up I have full colour control minus 3 wires on blue, this should be fine for initial tests\n\nSept 6th\n- Verilog code to test the display is looking good ready for initial test\n- so looks like the display is damaged, this is likely from the shorted pin on a previous test PCB\n- From digging through datasheets it's being driven correctly i verified this with my oscilloscope and still no luck\n\nJan 6th, 2023\n- Switched to a new display this one is working now. This uses a chip that handles the sketchy timing and allows me to interface over a custom MCU interface. Pretty fire tbh. \n- Next steps are to do a quick overview of untested electrical pieces mostly the power converter circuit and the BMS. The display driver plus switchboard is pretty much verified at this point.\n- Battery circuit plus power circuitry is all that is outstanding. consider one of 2 topologies\n\t- 3.2-4.2V battery stepped up to 5V with a boost then a battery charging circuit (preferred for now)\n\t- 6.4-8.4V battery stepped down to 5V with a buck and BMS\n\nJan 10th\n- ordered final testboards for BMS and Boost circuit\n- started working on the full motherboard integration\n- using this new display the calculator width and height can be shrunk a bit but it extrudes from the frame, to resolve this I think I'm going to oversize the cutout and add a 3d printed bezel after the fact which I can slowly modify to fit\n- Steps for tomorrow are as follows\n\t- focus on the mechanical integration and get the top panel in a shape that makes sense\n\t- shrink the top panel (switch plate) axes so that it nicely fits the display and minimizes the size of the calculator\n\t- once this is complete refit the alchitry into the design\n\t- after that cad up the new batteries and mock them into the design as well make sure to add a blocked between the exposed through hole pins and the battery\n\t- once this is complete shrink the height of the device\n\t- once the positions look good redesign the pcb mock \n\t- NOTE there is no really good documentation on the alchitry header pinout so maybe take a closer look at what exists prior to tapeout to ensure this isn't a disaster\n\nJan 11th \n- decent amount of cad work fitting everything in\n- display is poking out in current configuration and USBC doesn't really have a place to go\n- A cutout will be made in the PCB to allow the components space this will require a more detailed model of the display \n- it's unclear where all the circuits will go they aren't terribly large but there also isn't much space \n- I want to try to keep the alchitry where it is in that upper section beneath the display and find some method to get the USBC connector in there as well\n\nJan 12th\n- mechanical stackup is looking good the design has been split into two different boards. one will be the switchboard with all the led driver and switch decoding electronics everything else will be handled by the main board\n- Usb-C will go back to the regular flat connector which should work fine\n\nFeb 3rd\n- I have the prorotype switch boards\n- I also assembled the test boards for the boost convertor and battery charger, the boost circuit appears to be fine it can handle a modest load but without a proper load box it's hard to characterize it properly. One major challenge I noticed is that the current output of the boost isn't sized correctly to power all the LEDs, the display and the alchitry\n\nMar 13\n- link to sheet with data on power consumption the big deliverables for tonight are firming up the power architecture and making required schematic modifications and at least lay out the LCD board, bms and power circuit. I should try to order that tonight if possible or at least have it ready to order. https://docs.google.com/spreadsheets/d/19ptPP8tYTS9Z_lMBAoifKPtHAU-QfR65nrqQTcai4M8/edit?usp=sharing\n\nMar 14\n- Based on the power budget the 1A circuit should be sufficient for the display plus FPGA which is a good sign\n- The LED circuit will be redesigned following the work in [[Current Mirror Power Analysis]] \n- I created a document to keep notes on LTSpice techniques in [[LTSpice Master Notes]]\n- Next step is to redo the LED driver circuit and resolve problems spotted in the main power board\n- Main power board should be able to put out enough power but it needs to be rewired to provide voltage from the batteries direct to the LED circuit and I think some of the LED circuitry should be shifted on to it given that it is the mainboard... (doing this would mean more connections between the two boards)\n\nMar 15\n- for the led driver the decoders are going to need to be redone to handle this since we need to address 0-5 that requires 3 bits of binary meaning an additional decoder with each decoder having a dedicated address line\n\nMar 28\n- led driver is actually just going to be connected straight thru for 15 pins to drive the display + the lowside address which is\n- The connector I selected is this set of header pins from harwin which also will act as board spacer https://www.digikey.ca/en/products/detail/harwin-inc/M50-3502042/2264368\n\nApr 3\n- the next step here is to layout the board\n- With the reduced number of components and tighter connector routing around the connector will become more complex but the board should as a whole become easier\n- I also noticed when doing some MCAD integration that the switches weren't lining up with the front plate I should resolve this prior to redoing the layout on the switch board \n- This is now resolved I had to move the switches up slightly, there is another issue which seems to be the radii on the switch holes may hit the switches, this can be resolved in post with a precision file set which I will need to order [[To Buy]]\n\nApr 4\n- Starting to lay out the board and I am now realizing the double stacked hearder is maybe not better than a traditional approach I am going to try sourcing a flat one with the same number of connectors and pitch i expect this to work better than what I have currently selected\n- I was able to find ones that are 20pos but single row, using two of these side by side should resolve the issue https://www.digikey.ca/en/products/detail/harwin-inc/M50-3532042/7044020\n- Time to modify the library to add this in\n- library was modified and pcb was updated\n- some cleaning was done on routing and I started laying the components out one major thing that is missing is the alignment on the header, I'm going to let the Switchboard PCB drive the placement and then this will be handled on the top board after\n\nApr 7\n- broke some projects so that will need to be resolved by changing the folder names to have V2 after\n- Finished the switchboard layout it's looking good and ready to order\n- top switchboard can be ordered with send cut send for $65 per piece\n- current issue with parts hitting main board, the biggest offenders are the pots which luckily are thru hole so I could just extend the holes through the mainboard\n- The mainboard will require an overhaul to use the new connectors \n\nApr 9\n- Spring cleaning, cleaning up the github and reorganizing this documentation\n\nApr 11\n- Continuing work on mainboard pushing to get this ordered prior to exams\n- The mainboard has cutouts integrated and the new connector added and lined up, routing is needed now\n- Cleaned up mainboard and checked with solidworks model\n- I removed the dummy boards from the solidworks model\n- Currently ordering JLCPCB \n- JLCPCB order is placed I am now going through and ordering parts on DIGIKEY\n- there is some serious cleanup required in this documentation as well as gitignore work to be done to remove files which have been incorrectly uploaded I also am conflating V2 with revision so it's important that I seperate those moving forwards\n- Master electronics list with what I have and what I need is going in under V2 [[BOM V2 Rev 1 Electronics]]\n\nApr 13\n- parts were ordered digikey ref #80976678\n\n\nApr 18\n- kalih box whites are sick but don't work with through hole leds the below ones seem like good SMD equivalents \nhttps://www.digikey.ca/en/products/detail/w%C3%BCrth-elektronik/150141M173100/4489960\n\nshould probably try to source cheaper ones tho these are pretty expensive\non V2 of this calculator I should aim to reduce BOM without sacrificing function\n\nApr 19 **BIG NOTE**\n- modifications discovered (pre-assembly)\n- power switch was completely omitted from design\n\t- reset for fpga to prep for flash?\n\t- switch on side to solve this?\n\t- potential issue when flashing FPGA of leaving an LED turned on (figure out if this is a problem and how to mitigate)\n- smd LEDs are needed for kalih box whites\n- think about what a swap to a microcontroller would look like (changing the motherboard I believe)\n\nApr 22\n- Parts are here it's assembly time, below is the order of steps for assembly\n\t- first off is the fpga board (mainboard) this guy needs to have it's battery circuit and boost circuit assembled and tested. Then the FPGA can be mounted. Some initial digital design work should be done to bringup the FPGA. Once this is good to go the switchboard can be tested in conjunction with the mainboard.\n\t\t- to test the battery circuit I think this will just be a trial by fire where I probe the battery leads and attempt to charge\n\t\t- to test the boost a resistive load on the 5V while I probe it with the batteries hooked up should suffice\n\t- The header pins on the display need the plastic removed and also need to be realigned. \n\t- the USB-C partial pass thru needs to be soldered and fit checked with the rest of the design\n\nWebsite modifications\n- Blog post about SF trip and HF0\n- flesh out project section\n\t- big wafer and each project is a die on the wafer\n\t- just generate 3d models for new ones and make a (vault) for older ones which is just images?\n\t\t- **Motor controller (3d models)**\n\t\t- **clock (3d models)**\n\t\t- **power convertor (3d models)**\n\t\t- calculator (3d models)\n\t\t- bracket bot (3d models)\n\t\t- 380 robot (3d models)\n\t\t- MAG-Z (3d models)\n\t\t- **pong board (3d models)**\n\t\t- FRC (images)\n\t\t- big crete reflow oven (3d models)\n\t\t- fold3r origami system (3d models)\n\t\t- FPGA board on crack for calculator A200T (3d models)\n\t\t- covid-19 ventillator (3d models)\n\t\t- raytracer (3d models?)\n\t\t- cdot board (images)\n\t\t- 2020 cadathon bot (3d models)\n\t\t- roamer (3d models)\n\t\t- 3d printer cleaner (maybe 3d model otherwise image) (probably skip)\n\t\t- plane? (probaby skip this one)\n- flesh out construction site\n\t- try using hugo with quartz to run obsidian on the in progress projects\n\t- make documentation repo which is shared among projects to make it easier to handle documentation\n\t- ","lastmodified":"2023-06-26T13:32:19.535903129Z","tags":[]},"/BigCreteCalculator/High-Level-Scope":{"title":"Untitled Page","content":"---\ntitle: \"High Level Scope\"\ndraft: \"false\"\n---\n\nV1 - Not really a revision but rather breakout boards for each of the circuits that's not space constrained and easy to debug, this proves out V2\nV2 - [[V2/Architecture V2/TOP Design V2]] Using off the shelf FPGA (Alchitry) get a calcualtor as slim as possible working with the minimal scope set above. This will prove out mechanical and electrical integration allowing for digital design iteration paving the way for V3.\nV3 - From scratch fully featured calculator with custom FPGA circuit and replaceable RAM","lastmodified":"2023-06-26T13:32:19.535903129Z","tags":[]},"/BigCreteCalculator/LTSpice-Master-Notes":{"title":"Untitled Page","content":"---\ntitle: \"LTSpice Notes\"\ndraft: \"true\"\n---\n\nCreating a custom diode model\n\nfrom this document https://ltwiki.org/files/SPICEdiodeModel.pdf\n![[Pasted image 20230314142118.png]]\nthese are the parameters and they fit the schokley equation below\n![[Pasted image 20230314142137.png]]\nIS = IS (saturation current)\nVd is the input voltage\nN = N (emission coefficient)\nVt = thermal voltage and is set based on simulator values\nVt is determined by the following equation. k is the boltzman constant, T is the temperature (kelvin), q is the electron charge (1.602176634e-19 C)\n![[Pasted image 20230314145436.png]]\n\nGMIN is added by the program to help with convergence\n\n![[Pasted image 20230314145236.png]]\nexample spice decleration for custom model\n\nNote that since components are temperature dependent the temperature can be set via a .TEMP decleration in celsius. So for example to set a temperature of 25C the following directive is used\n![[Pasted image 20230314152145.png]]\n","lastmodified":"2023-06-26T13:32:19.535903129Z","tags":[]},"/BigCreteCalculator/To-Buy":{"title":"Untitled Page","content":"---\ntitle: \"To Buy\"\ndraft: \"true\"\n---\n\n- More gateron green switches\n- quick swap plugs for switches (stretch)\n- precision file set","lastmodified":"2023-06-26T13:32:19.535903129Z","tags":[]},"/BigCreteCalculator/V1/Electrical-Design-V1/LED-+-Driver":{"title":"LED + Driver","content":"# LED and Driver\n[[Motherboard]]\n\n| Rail   | Voltage | Current | Notes                       |\n| ------ | ------- | ------- | --------------------------- |\n| Vcc    | 5V      | 2A      | 1.62A should be peak        |\n\n## LED Array Information\nSwitch LEDs\nhttps://www.adafruit.com/product/2739\n Common anode (grounds tied together)\n ![[p2739.pdf]]\n 20mA forward current\n 100mA at 1/10 duty\n 21 - 27 keys \n this is 27 x 3 leds = 81 leds\n at full tilt this would be 81 x 0.02A = 1.62A JEEZ\n \n5x6 (5 wide 6 tall)\nwith RGB in the rows not columns this becomes 15x6\n\n## Driver Circuitry\n\n### Requirements\n- Must be able to adjust LED brightness on each RGB channel for the LEDs\n- Must be able to drive each LED to a maximum current of \n\n### LTSpice\nNOTE this needs to be redone \n![[Pasted image 20210311220234.png]]\n\nWillson current mirror paired with two transistors for charlieplexing\nDecoders would be used to select MOSFETS to select the diode getting power\n\n\nGate Decoders are being used to select highside and lowside gates\n\nOn the lowside (nch) there are two 74HC238 decoders\nthese take 5 control signals HSG0, HSG1, HSG2, HSG3, En\nEN needs to be low to allow for operation, pull high to disable the output and keep all LEDs off \n\n\n\n\nComponents\n\nN Channel Mosfet\nLCSC: C344010\nSOT-23-3\n![[1912111437_BORN-AO3400A_C344010.pdf]]\n\nP Channel Mosfet\nLCSC: C15127\nSOT-23-3L\n![[Alpha-Omega-Semicon-AOS-AO3401A_C15127.pdf]]\n\n3-8 decoder (INVERTING)\nLCSC P/N C5602\nSOIC-16\nDatasheet\n![[Nexperia-74HC138D-653_C5602.pdf]]\n\n3-8 decoder (NON INVERTING)\nLCSC P/N C5620\nDatasheet\n![[2005221001_Nexperia-74HC238D-653_C5620.pdf]]\n\nNPN BJT\nLCSC: C6749\nSOT-23-3\n![[1810051504_Changjiang-Electronics-Tech-CJ-S9013_C6749.pdf]]\n\nPNP BJT (NOTE THE DESIGN NOW REQUIRES A NPN BJT)\nLCSC P/N C444726\nSOT-23\nDatasheet\n![[1912111437_Slkor-SLKORMICRO-Elec-SS8550_C444726.pdf]]\n\nDiode \nLCSC: C2128\nSOD-323\nDatasheet\n![[Changjiang-Electronics-Tech-CJ-1N4148WS_C2128.pdf]]","lastmodified":"2023-06-26T13:32:19.699905621Z","tags":[]},"/BigCreteCalculator/V2/Architecture-V2/Architecture-Overview":{"title":"Architecture Overview","content":"Requirements\n- Must contain display, full colour LCD\n- Must contain FPGA\n- Must be battery powered\n- Chassis must contain metal (brass top and bottom)\n- Key switches are RGB mechanical switches\n- Program and charge over USB-C\n- internal batteries with all circuitry to handle them internal\n\nScope Creep Items\n- Swappable boot (either desolder SPI chip or include MCU that can reflash it or some other system)\n- Audio jack for playing with noize\n- Speakers for playing with noize?\n- camera module for taking photos\n- wireless charging","lastmodified":"2023-06-26T13:32:19.699905621Z","tags":[]},"/BigCreteCalculator/V2/Architecture-V2/Power-Architecture-V2":{"title":"Power Architecture V2","content":"\n## OPTION 1 - 1s boost to 5V (selected)\n\n(preferred option)\n\nBattery charger circuit\nRT9526A - used in numworks calculator\n![[Pasted image 20230106223113.png]]\nNumworks calculator power circuit \n\nPins\nVin (hook to USB power)\nIset - use a resistor to tune charge speed\nImin - use a resistor to tune minimum current\nCHG_SB\nPGB\nBATT - add output capacitor and hook into cells\n\n\nBoost circuit\nTLV61070A - 5V output with 2.7V to 4.35V on input which is within lipo range\nThis circuit is capped at 1A continous so 5W delivery (based on power estimation this should be fine)\nif this isn't sufficient swap to these https://www.ti.com/lit/ds/symlink/tps61033.pdf?ts=1677895328479\u0026ref_url=https%253A%252F%252Fwww.ti.com%252Fproduct%252FTPS61033\n\n\n\nContinous power circuit\n\nMake brekaout PCBs for ICs that are breadboard mountable (done both circuits verified)\n\nBattery\n\nPower Consumption document\nhttps://docs.google.com/spreadsheets/d/19ptPP8tYTS9Z_lMBAoifKPtHAU-QfR65nrqQTcai4M8/edit?usp=sharing\n\n\n\n## OPTION 2 - 2s BMS and buck to 5V\n\n2s BMS giving between 8.4V and 6.4V\n","lastmodified":"2023-06-26T13:32:19.699905621Z","tags":[]},"/BigCreteCalculator/V2/Architecture-V2/TOP-Design-V2":{"title":"Untitled Page","content":"---\ntitle: \"Big Crete Calculator V2 Top Level\"\ndraft: \"false\"\n---\n\n\n# External Devices\n\n## Alchitry\nSee https://www.sparkfun.com/products/16527 I have one of these already and it's connectors make it easy to mount to a custom PCB for integration into a calculator\n\n## Battery\nBattery will be a LiPO 1s2p pack to give the most capacity possible. Easiest to get batteries are 2Ah ones from adafruit. The biggest drawback from using them is their C rating which tops me out at 4A max draw which at their minimum voltage of 3.7V is 15W which should be adequete for the circuit. See [[Power Architecture V2]] for more information.\n\n## LEDs\nFor the keyswitches square LEDs are required. The selected ones are from adafruit but purchased through digikey [[p2739.pdf]]\n\n## Switches\nSwitches were selected on the basis of being as loud as possible and allowing RGB lighting. The best option for this are gateron greens which can be paired with rectangular RGB LEDs. \n\n## Screen\nThe screen being used is the adafruit 320x480 full colour LCD. This is verified working with the FPGA per a design I wrote located under RTL/display_test in this repo. https://www.adafruit.com/product/2050\n\n## USB-C Port\nfairly straightforward this isn't going to be supporting USB-PD (maybe that'll show up in V3) instead it will be taking 5V input from a non PD power source and allow reprogramming the alchitry over the data connection (this will just be attached through from the alchitry)\nThe 5V signal will be fed past the boost convertor directly going to the circuit. The data pins will be connected through a header on the mainboard to the alchitry. Since the alchitry doesn't breakout it's programming pins over the header this will be done by using a male USB-C connector with pads for soldering wires on the end. it's a tad jank but it'll get the job done. https://www.digikey.ca/en/products/detail/keystone-electronics/954/5638367\nthis is the connector that will hook into the alchitry\n\n\n# Internal Subcircuits\n\n## Screen\nAdafruit Display that handles driving, backlight, voltage translation\n\n## LED Multiplexer\nfor more information on the LED driver circuit topology see [[Current Mirror Power Analysis]] \n\n## BMS\nsimple single cell charger that takes 5V from USB-C as input. See [[Power Architecture V2]]\n\n## Boost Regulator \nsteps 3.2V-4.2V to a constant 5V. See [[Power Architecture V2]]","lastmodified":"2023-06-26T13:32:19.699905621Z","tags":[]},"/BigCreteCalculator/V2/Electrical-Design-V2/BOM-V2-Rev-1-Electronics":{"title":"BOM V2 Rev 1 Electronics","content":"https://docs.google.com/spreadsheets/d/11Q3gSnWoMS3d95ym5c6aVudiQ-4RtUiPRCnI7v4GrdA/edit#gid=0\n\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V2/Electrical-Design-V2/Current-Mirror-Power-Analysis":{"title":"Current Mirror Power Analysis","content":"so the current mirror draws from a 5V source what I want to know is if it's powering an LED what is the power draw associated. Is it acting like a linear regulator and losing any excess voltage?\n\n![[Pasted image 20230314001918.png]]\nfrom an LTSpice sim here I show the voltage across the diode during switching we can see that when it's on the voltage is 0.72V to 0.36V if we overlay the current on this we see the following.\n\n![[Pasted image 20230314002223.png]]\n![[Pasted image 20230314002234.png]]\nlooking at slice it varies from 0mA and 0.36V across the diode to 23mA and 0.72V across the diode. The actual power here when it's on would be VI =  0.01656 W \n\nhowever at the same time from the source at 5V we are seeing 26.77mA ignor the polarity on the plot\n![[Pasted image 20230314002424.png]]\nat a voltage of 5V this is VI = 0.13385W this is a lot more than whats going through the LED so where is the power headed.\n\nso for one we can see that the current has two paths it can follow in this instance one is through R4 on the schematic and the other is through the diode D2. We see that when it's on the current through R4 is 4mA roughly this is 0.02W already more than what travels through the diode. Adding these two paths together we get the following relation.\n\n0.02W + 0.01656W = 0.03656W\nthe remaining power is 0.0973W this is a lot I think this is largely lost through the current mirror to drive the voltage on the diode. I think that playing with some parameters here will make the efficiency a bit clearer. Since this is basically still operating in a linear manner I think that using voltages closer to that of the diode voltage will work best. Of course I don't want to limit the output brightness so maybe some PWM tests at high voltage are in order. \n\nBelow is an efficiency calc with 2V on the input. \nV across diode is 0.734V again at 21.33mA for P = 0.01565W (same as before mostly)\nfrom source A = 0.02175mA V = 2 so P = 0.0435W (much closer this time)\nIt seems that the losses are whatever goes through the current match resistor plus the voltage offset to the diode. I think to get this better using a voltage close to the drive voltage is best. \n \nSince the LED array will be switched (only one LED on at a time) the power requirement would be the current through one LED to get the brightness I want with a 10% margin at the voltage steady. So if I drive the LED at 100mA to get the brightness.\n\nI'm beginning to think that scanning across the LEDs isn't the best solution for this. So from the datasheet for these LEDs they can handle 100mA at a 10% duty cycle. This is 4x the current with 10x less time. \n\nCurrently with what I have at the moment I have 27 RGB LEDs giving 81 LEDs to address. I really want to add 3 more RGBs to get a full 90 LEDs. This is then indexed through one by one. This gives a time of 1/90 for each LED which is 11.1ms per LED. A current above 100mA will likely need to be driven. I'm thinking that I split it into the 3 colours giving 3 zones dropping the time from 1/90 to 1/30 which is 33.3ms much closer to the datasheet spec of 100ms. then each individual channel could have a current mirror tuned to the required current. \n\nI think a test setup to test 33ms on time with different forward currents is the best idea to validate this system and circuit. The main things I care about are how much power is actually delivered from the source to drive a given LED at a brightness for a representative amount of time so to do this I need to create a circuit that mimics the switching characteristics of my actual setup with and LED I can use to verify brightness. To handle the high and low side switching my FPGA should be used to ensure consistency in the design (and I don't have an arduino around) then I can validate the pulse width with my saleae and to measure the current I really need an oscilloscope and measure the voltage across the current matching resistor. This will tell me the peak current through the led when it's on.  I am going to limit the on time to what the datasheet says which is 1/10 width at 100mA I'll do 1/30 ontime at 100mA capped, with further testing this could be pushed up but I'm sure that for a first version this will be suficient. \n\nDiode curves for the red blue and green\nred\n![[Pasted image 20230314133720.png]]\ngreen\n![[Pasted image 20230314133729.png]]\nblue\n![[Pasted image 20230314133735.png]]\nblue and green are the highest at a rough forward voltage of 3.6V for 50mA I am going to attempt to extrapolate these curves to get the forward current I want for 100mA. \n\nusing this wikipedia for diodes\nhttps://en.wikipedia.org/wiki/Diode_modelling\nand using the shockley equation I get the following for the diodes. note that Vt is 25.6796mV for these at a temperature of 25C\n![[Pasted image 20230314145947.png]]\nthe fit isn't amazing but the values seem to make sense \nso we can assume that at 100mA a forward voltage of 2.582 will be required\n\n\nhttps://docs.google.com/spreadsheets/d/19ptPP8tYTS9Z_lMBAoifKPtHAU-QfR65nrqQTcai4M8/edit?usp=sharing\n\nThe results are below\n| diode | forward voltage | current |\n|--|--|--|\n| red | 2.582V | 100mA |\n| green | 3.791V | 100mA |\n| blue | 3.791V | 100mA |\n\nthis means that a supply in excess of 3.791V will be needed. I think this means it can be powered direct from the battery. Next up lets check efficiency in LTSpice for the battery voltage range which is 3.6V - 4.2V\n\nTo do this I am first going to add custom diodes for the values we got from the datasheet the process for this is in [[LTSpice Master Notes]]\n\nThe values for the spice model as determined from within desmos are in the table below with compensation for Vt assuming 25C\n| diode | Is | n |\n|--|--|--|\n| red | 0.0000606102 | 13.5699 |\n| green | 0.00000257692 | 13.9707 |\n| blue | 0.00000257692 | 13.9707 |\n\nrunning this for the diodes up to 3.791V with a ramp input gives the following diode curves for blue and green which have the same parameters\n\n![[Pasted image 20230314151508.png]]\nthis looks pretty close to what we would expect which is a good sign, the peak current is 97.3mA which is fairly close. The error here is probably gmin or one of the other spice parameters which weren't taken into account. Comparing to the datasheet curves as a given point such as 3.1V which should be 15mA (14.5mA on the desmos) gives 14.3mA which is close enough for me. \n\nWith this all figured out we can now start testing efficiencies of the circuit. \n\ndocumented in the spreadsheet but from going through all the values and testing the worst case efficiency is 60% with the best case being 88% this is manageable. Max battery current draw is ~100mA and it tends to be fixed. The resistor values that should be used are \nRed = 8ohm\nblue = green = 3ohm\n\nWith this all determined we can budget 300mA max draw for the LED drivers and the circuit can be redesigned following these parameters. ","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V2/Electrical-Design-V2/LED-Driver-Board-Design-Journal":{"title":"LED Driver Board Design Journal","content":"\nMar 15 \nre-architecting the LED Driver board\n\nOne big issue is how to change the addressing structure now that blue green and red are being split up. One thought is that each colour gets a dedicated decoder with a 3 bit input. This would mean 9 control lines driving 15 gates not terribly efficient not to mention the added complexity and cost of the decoders. Below is a different way of approaching this showing all the possible output combinations. the red highlight is showing how the leds are in groups of 3 and since only one rgb led is driven at a time you need to be able to only handle every combination for that led masking the rest out and this just moves across. this gives 40 unique combinations where the bottom 3 bits represent the value output to a specific rgb led and the top 3 are effectively the mask. This drops the required bits from 9 to 6 which is still a lot but far more reasonable. The bottom 3 bits won't require a decoder and can be multiplexed using the top 3 bits. This would require 3 multiplexers one for each colour channel. \n\n![[Pasted image 20230315141529.png]]\n\nNew thought, this should just be handled in the fpga since that's literally what it's for and it has a lot of available pins so a higher density connector should be employed. I think using a tighter pitch or double rows is the solution here. The savings on pins isn't outweighed by the added circuit complexity and honestly just makes a more expensive and complex design.\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Architecture-V3/Architecutre-Overview-V3":{"title":"Architecutre Overview V3","content":"**Requirements\n- Must contain display, full colour LCD\n- Must contain FPGA\n- Must be battery powered\n- Chassis must contain metal\n- Key switches are RGB mechanical switches\n- Program and charge over USB-C\n- able to manage batteries\n- can charge and operate while charging\n\n\n**Scope Creep Items\n- Swappable boot (either desolder SPI chip or include MCU that can reflash it or some other system)\n- Audio jack for playing with noize\n- Speakers for playing with noize?\n- camera module for taking photos\n- wireless charging\n- USB PD for charging\n\n\n**Sub Logs**\n[[Battery Circuit]] contains info on BMS and protection for battery this is on the primary PCB\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Architecture-V3/Battery-Circuit":{"title":"Battery Circuit","content":"**Battery Circuit\n\nBattery circuit must supply 5 volts with a current draw of 5A (25W)\n\nwhen battery is charging how does the system run?\n\npower supplied to charge the battery also supplies power to the calculator\n5V supply to charge batteries\n\nComponent sourcing below\n\nEach cell has a protection IC, split the cells with a MOSFET to charge, charge with additional IC\n\n\ntwo battery protection ICs, BQ2973 seems pretty good\n\ncharger IC, BQ24095? I think I can do better tho\n\nbuck IC TPS56528 seems fine, they all seem the same, maybe find one my team uses \n\n\nthen split with a fet (should have designs of this)\n\ncharge in parallel with a single charger\n\nif 5V comes in this needs to bypass the buck convertor, (switch the buck off)\n\nquestion is how do you allow for the plug to be removed and also allow everything to react in time?\n\nI suggest a board is made to test this circuit \n\nit should allow for two 18650s to be connected both with protection ICs, then an additional charger combined with the buck IC I intend to use, this needs an easy universal hookup to an arduino and electronic load\n\n\n\nbuck circuit done\nenable on buck is 1.1-1.3 (1.2V normally)\nenable when USB is unplugged (above 5V input)\ndisable when USB is plugged in\n\n(disable when the batteries are almost dead below 3.3V (6.6V))\n\n6.6V -\u003e 1.2V\n\nbattery protection ic\nOVP\nOVC\n\n \nBQ29732\nOCD - 0.19V\nOCC - 0.10V\nUVP - 2.5V\nOVP - 4.28V\nSCD - 0.5V\n\nI want OCD - 1.5A (this would be 9.9W to 12.6W)\n\n0.19V / 1.5A = 126mOhm\n\nthis gives \nOCC of 793mA\nSCD of 3.97A\n\nMOSFET Paramaters\nVdss = 25V\nRds(on) = 63mOhm @ Vgs 3.5V\n\n \n\nBQ29737\nOCD - 0.10V\nOCC - 0.05V\nUVP - 2.8V\nOVP - 4.25V\nSCD - 0.3V\n\nI want OCD - 1.5A (this would be 9.9W to 12.6W)\n\n0.10V / 1.5A = 66mOhm\n\nthis gives \nOCC of 757mA\nSCD of 4.5A\n\nMOSFET Paramaters\nVdss = 25V\nRds(on) = 33mOhm @ Vgs 3.5V\n\nBest part is the FDS6612A but DMG4496SSS-13 will work I think","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Architecture-V3/Endpoints":{"title":"Endpoints","content":"**Power Endpoints\n\n- FPGA \n\nInternal Rails\n3.3V @ 3.5A\n1.8V @ 1.4A\n1.35V @ 1.2A\n1V @ 2.2A\n\nThis is 17.89W\n\nThe board wants 5V input which corresponds to 3.578A (lets call it 3.5A)\n\n- Display\n\n3v3 @ 5mA\n5v @ 30mA\n\n\n- LEDs\n\nDrive these off the 5V rail, unclear current draw budget an amp?\n\n\nPower infrastructure\n5A @ 5V (25W)\n0.5A @ 3v3\n\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/Boot-SPI-to-FPGA-connection":{"title":"Boot SPI to FPGA connection","content":"# Connection from FGPA to Boot SPI\n\nrelates to [[FPGA Board]]\n\n## Pinout\n| Pin Name | SPI Pin | M.2 Pin | FPGA Pin | Function |\n| -------- | ------- | ------- | -------- | -------- |\n|          |         |         |          |          |","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/Corsair-DDR3L":{"title":"Corsair DDR3L","content":"Corsair SO-DIMM RAM\n\nP/N: CMSO4GX3M1C1600C11\nMfr Date: 2013, July 15 - 21\n\n### Implementation Specific\nBeing run at 1.5V\n\nVivado clock timings is 333.3333MHz clock (1:2 phy) so I think this means 666MHz to the ram?\nReference clock is 100MHz to the FPGA [[FPGA Clock]]\n\n### General\nCas Latency (CL11) Supports CL = (11,9,7,6)\n\nDDR3-1600\n\nBanks: 8 (3 bit)\nRow Address Bits: 16\nColumn Address Bits: 10\nRanks: 1\nSDRAM device width 8 bits\nCapacity 4Gb\nPrimary bus width 64bits \nNON-ECC\n\nSupports 1.35V and 1.5V\n\nDLL-Off mode supported\nRZQ/7 supported\nRZQ /6 supported\n\n### Timings\nTck = 1.25ns\nTaa = 13.125ns\nTwr = 15ns\nTrcd = 13.125ns\nTrrd = 6ns\nTrp = 13.125ns\nTras = 35ns\nTrc = 48.125ns\nTrfc = 260ns\nTwtr = 7.5ns\nTrtp = 7.5ns\nTfaw = 30ns\n\nTcke unknown = assumed to be 5ns\nTrefi unknown = assumed to be 4us","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/DDR3-to-FPGA-connection":{"title":"DDR3 to FPGA connection","content":"# Connection from FGPA to RAM\n\nrelates to [[FPGA Board]]\n\n## IMPEDANCE NOTES\n\nhttps://resources.altium.com/p/how-to-route-ddr3-memory-and-cpu-fan-out\nhttps://www.micron.com/support/~/media/D546161C2C6140BCB0BAEE954AA53433.pdf\nhttps://www.altium.com/documentation/altium-designer/controlled-impedance-routing-ad\n\nPin Groups\nDQ (63 - 0)\nA (15 - 0)\nBA (2 - 0)\nDQS (8 differential pairs)\nCK (1 differential pair)\nRAS\nCAS\nWE\nRESET\nCKE0\nODT0\nCS0\n\nRoute Command signals (DQ and DQS)\n\nGroup into byte groups\nLength matching only applies to byte lanes\nDQ(7:0) DQS0\nDQ(15:8) DQS1\nDQ(23:16) DQS2\nDQ(31:24) DQS3\nDQ(39:32) DQS4\nDQ(47:40) DQS5\nDQ(55:48) DQS6\nDQ(63:56) DQS7\n\nDQS difference in lenght between pair is +/- 20 mil\n100 mil on byte lanes? I think that's 100 mil difference try to match them up as close as possible\n\nDATA GROUP\nData (DQ) 1.9 inch minimum\n7.9 mil width: target impedance 40 ohm\ntrace space = 11.8 mils (between wires?)\ntrace space from DIMM pins = 7 mil (not sure what this means?)\ntrace space to other signal groups = 12 mils\n\nStrobe (DQS) 1.9 inch minimum\n7.9 mil width: target impedance 40 ohm\ntrace space = 4 mil between pair\ntrace space to other signal groups = 15.8 mils\n\nCLOCK GROUP\nMemory Clock(CK) 1.9 inch minimum\n4 mils length difference between pair\n9.9 mils pair to pair (2 pairs)\nwidth 8 mils target 40 ohm trace impedance 80 ohm differential impedance\ntrace space 5 mil\ntrace space to other groups 20 mil\n\nCONTROL GROUP\nControl Group (CKE, ODT, CS, RESET) 1.9 inch minimum\n20 mil length difference from memory clock (clock group)\nwidth 5 mil target 40 ohm impedance\ntrace space 12 to 15 mil (except at dimm)\ntrace space from dimm 7 mil\ntrace space to other signal groups 25 mil\n\nADDRESS GROUP\nAddress Group (BA, RAS, CAS, WE, A) 1.9 inch minimum\n20 mil length difference from memory clock (clock group)\nwidth 5 mil target 40 ohm impedance\ntrace space 12 to 15 mil (except at dimm)\ntrace space from dimm 7 mil\ntrace space to other signal groups 25 mil\n\n\n\n\n\n## Other DDR Pins\n| Pin Name | RAM Pin | Function             |\n| -------- | ------- | -------------------- |\n| Vrefdq   | 1       | [[FPGA Board]]       |\n| Vss      | 3       | 0V                   |\n| Vss      | 9       | 0V                   |\n| Vss      | 13      | 0V                   |\n| Vss      | 19      | 0V                   |\n| Vss      | 25      | 0V                   |\n| Vss      | 31      | 0V                   |\n| Vss      | 37      | 0V                   |\n| Vss      | 43      | 0V                   |\n| Vss      | 49      | 0V                   |\n| Vss      | 55      | 0V                   |\n| Vss      | 61      | 0V                   |\n| Vss      | 65      | 0V                   |\n| Vss      | 71      | 0V                   |\n| Vdd      | 75      | [[FPGA Board]]       |\n| Vdd      | 81      | 0V                   |\n| Vdd      | 87      | 0V                   |\n| Vdd      | 93      | [[FPGA Board]]       |\n| Vdd      | 99      | [[FPGA Board]]       |\n| Vdd      | 105     | [[FPGA Board]]       |\n| Vdd      | 111     | [[FPGA Board]]       |\n| Vdd      | 117     | [[FPGA Board]]       |\n| Vdd      | 123     | [[FPGA Board]]       |\n| Vss      | 127     | 0V                   |\n| Vss      | 133     | 0V                   |\n| Vss      | 139     | 0V                   |\n| Vss      | 145     | 0V                   |\n| Vss      | 151     | 0V                   |\n| Vss      | 155     | 0V                   |\n| Vss      | 161     | 0V                   |\n| Vss      | 167     | 0V                   |\n| Vss      | 173     | 0V                   |\n| Vss      | 179     | 0V                   |\n| Vss      | 185     | 0V                   |\n| Vss      | 189     | 0V                   |\n| Vss      | 195     | 0V                   |\n| SA0      | 197     | Serial Address Input |\n| Vddspd   | 199     | [[FPGA Board]]       |\n| SA1      | 201     | Serial Address Input |\n| Vtt      | 203     | [[FPGA Board]]       |\n| Vss      | 2       | 0V                   |\n| Vss      | 8       | 0V                   |\n| Vss      | 14      | 0V                   |\n| Vss      | 20      | 0V                   |\n| Vss      | 26      | 0V                   |\n| Vss      | 32      | 0V                   |\n| Vss      | 38      | 0V                   |\n| Vss      | 44      | 0V                   |\n| Vss      | 48      | 0V                   |\n| Vss      | 54      | 0V                   |\n| Vss      | 60      | 0V                   |\n| Vss      | 66      | 0V                   |\n| Vss      | 72      | 0V                   |\n| Vdd      | 76      | [[FPGA Board]]       |\n| Vdd      | 82      | [[FPGA Board]]       |\n| Vdd      | 88      | [[FPGA Board]]       |\n| Vdd      | 94      | [[FPGA Board]]       |\n| Vdd      | 100     | [[FPGA Board]]       |\n| Ck1      | 102     | NC                   |\n| Ck1#     | 104     | NC                   |\n| Vdd      | 106     | [[FPGA Board]]       |\n| Vdd      | 112     | [[FPGA Board]]       |\n| Vdd      | 118     | [[FPGA Board]]       |\n| Vdd      | 124     | [[FPGA Board]]       |\n| Vrefca   | 126     | [[FPGA Board]]       |\n| Vss      | 128     | 0V                   |\n| Vss      | 134     | 0V                   |\n| Vss      | 138     | 0V                   |\n| Vss      | 144     | 0V                   |\n| Vss      | 150     | 0V                   |\n| Vss      | 156     | 0V                   |\n| Vss      | 162     | 0V                   |\n| Vss      | 168     | 0V                   |\n| Vss      | 172     | 0V                   |\n| Vss      | 178     | 0V                   |\n| Vss      | 184     | 0V                   |\n| Vss      | 190     | 0V                   |\n| Vss      | 196     | 0V                   |\n| SDA      | 200     | SPD SDA              |\n| SCL      | 202     | SPD SCL              |\n| Vtt      | 204     | [[FPGA Board]]       |\n\n## FPGA to DDR3 Connection\n\n| Pin Name  | RAM Pin | FPGA Pin | Notes                   |\n| --------- | ------- | -------- | ----------------------- |\n| dq0       | 5       | F13      | SSTL15                  |\n| dq1       | 7       | F14      | SSTL15                  |\n| dq2       | 15      | F16      | SSTL15                  |\n| dq3       | 17      | E17      | SSTL15                  |\n| dq4       | 4       | E13      | SSTL15                  |\n| dq5       | 6       | E14      | SSTL15                  |\n| dq6       | 16      | E16      | SSTL15                  |\n| dq7       | 18      | D16      | SSTL15                  |\n| dq8       | 21      | B15      | SSTL15                  |\n| dq9       | 23      | B16      | SSTL15                  |\n| dq10      | 33      | C13      | SSTL15                  |\n| dq11      | 35      | B13      | SSTL15                  |\n| dq12      | 22      | A13      | SSTL15                  |\n| dq13      | 24      | A14      | SSTL15                  |\n| dq14      | 34      | B17      | SSTL15                  |\n| dq15      | 36      | B18      | SSTL15                  |\n| dq16      | 39      | E19      | SSTL15                  |\n| dq17      | 41      | D19      | SSTL15                  |\n| dq18      | 51      | B20      | SSTL15                  |\n| dq19      | 53      | A20      | SSTL15                  |\n| dq20      | 40      | A18      | SSTL15                  |\n| dq21      | 42      | A19      | SSTL15                  |\n| dq22      | 50      | F19      | SSTL15                  |\n| dq23      | 52      | F20      | SSTL15                  |\n| dq24      | 57      | D20      | SSTL15                  |\n| dq25      | 59      | C20      | SSTL15                  |\n| dq26      | 67      | C22      | SSTL15                  |\n| dq27      | 69      | B22      | SSTL15                  |\n| dq28      | 56      | E22      | SSTL15                  |\n| dq29      | 58      | D22      | SSTL15                  |\n| dq30      | 68      | E21      | SSTL15                  |\n| dq31      | 70      | D21      | SSTL15                  |\n| dq32      | 129     | K13      | SSTL15                  |\n| dq33      | 131     | K14      | SSTL15                  |\n| dq34      | 141     | M13      | SSTL15                  |\n| dq35      | 143     | L13      | SSTL15                  |\n| dq36      | 130     | L14      | SSTL15                  |\n| dq37      | 132     | L15      | SSTL15                  |\n| dq38      | 140     | L16      | SSTL15                  |\n| dq39      | 142     | K16      | SSTL15                  |\n| dq40      | 147     | W21      | SSTL15                  |\n| dq41      | 149     | W22      | SSTL15                  |\n| dq42      | 157     | AA20     | SSTL15                  |\n| dq43      | 159     | AA21     | SSTL15                  |\n| dq44      | 146     | AB21     | SSTL15                  |\n| dq45      | 148     | AB22     | SSTL15                  |\n| dq46      | 158     | U20      | SSTL15                  |\n| dq47      | 160     | V20      | SSTL15                  |\n| dq48      | 163     | V18      | SSTL15                  |\n| dq49      | 165     | V19      | SSTL15                  |\n| dq50      | 175     | V17      | SSTL15                  |\n| dq51      | 177     | W17      | SSTL15                  |\n| dq52      | 164     | AA18     | SSTL15                  |\n| dq53      | 166     | AB18     | SSTL15                  |\n| dq54      | 174     | U17      | SSTL15                  |\n| dq55      | 176     | U18      | SSTL15                  |\n| dq56      | 181     | P14      | SSTL15                  |\n| dq57      | 183     | R14      | SSTL15                  |\n| dq58      | 191     | R18      | SSTL15                  |\n| dq59      | 193     | T18      | SSTL15                  |\n| dq60      | 180     | P15      | SSTL15                  |\n| dq61      | 182     | R16      | SSTL15                  |\n| dq62      | 192     | N13      | SSTL15                  |\n| dq63      | 194     | N14      | SSTL15                  |\n| dm0       | 11      |          | pull low, ram pin wrong |\n| dm1       | 28      |          | pull low, ram pin wrong |\n| dm2       | 44      |          | pull low, ram pin wrong |\n| dm3       | 59      |          | pull low, ram pin wrong |\n| dm4       | 140     |          | pull low, ram pin wrong |\n| dm5       | 157     |          | pull low, ram pin wrong |\n| dm6       | 172     |          | pull low, ram pin wrong |\n| dm7       | 189     |          | pull low, ram pin wrong |\n| dqsp0     | 12      | C14      | DIFF_SSTL15             |\n| dqsn0     | 10      | C15      | DIFF_SSTL15             |\n| dqsp1     | 29      | A15      | DIFF_SSTL15             |\n| dqsn1     | 27      | A16      | DIFF_SSTL15             |\n| dqsp2     | 47      | F18      | DIFF_SSTL15             |\n| dqsn2     | 45      | E18      | DIFF_SSTL15             |\n| dqsp3     | 64      | B21      | DIFF_SSTL15             |\n| dqsn3     | 62      | A21      | DIFF_SSTL15             |\n| dqsp4     | 137     | K17      | DIFF_SSTL15             |\n| dqsn4     | 135     | J17      | DIFF_SSTL15             |\n| dqsp5     | 154     | Y21      | DIFF_SSTL15             |\n| dqsn5     | 152     | Y22      | DIFF_SSTL15             |\n| dqsp6     | 171     | AA19     | DIFF_SSTL15             |\n| dqsn6     | 169     | AB20     | DIFF_SSTL15             |\n| dqsp7     | 188     | N17      | DIFF_SSTL15             |\n| dqsn7     | 186     | P17      | DIFF_SSTL15             |\n| addr15    | 78      | H13      | SSTL15                  |\n| addr14    | 80      | G13      | SSTL15                  |\n| addr13    | 119     | G15      | SSTL15                  |\n| addr12    | 83      | G16      | SSTL15                  |\n| addr11    | 84      | G17      | SSTL15                  |\n| addr10    | 107     | G18      | SSTL15                  |\n| addr9     | 85      | J15      | SSTL15                  |\n| addr8     | 89      | H15      | SSTL15                  |\n| addr7     | 86      | H17      | SSTL15                  |\n| addr6     | 90      | H18      | SSTL15                  |\n| addr5     | 91      | J22      | SSTL15                  |\n| addr4     | 92      | H22      | SSTL15                  |\n| addr3     | 95      | H20      | SSTL15                  |\n| addr2     | 96      | G20      | SSTL15                  |\n| addr1     | 97      | K21      | SSTL15                  |\n| addr0     | 98      | K22      | SSTL15                  |\n| ba2       | 79      | M21      | SSTL15                  |\n| ba1       | 108     | L21      | SSTL15                  |\n| ba0       | 109     | J20      | SSTL15                  |\n| ckp0      | 101     | J14      | DIFF_SSTL15             |\n| ckn0      | 103     | H14      | DIFF_SSTL15             |\n| rasn      | 110     | J21      | SSTL15                  |\n| casn      | 115     | J19      | SSTL15                  |\n| wen       | 113     | H19      | SSTL15                  |\n| resetn    | 30      | D14      | LVCMOS15                |\n| cke0      | 73      | M22      | SSTL15                  |\n| odt0      | 116     | M18      | SSTL15                  |\n| csn0      | 114     | N22      | SSTL15                  |\n| sys_clk_i |         | K18      |                         |\n\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/FPGA-AC7A200T-1SBG484C-Pinout":{"title":"FPGA AC7A200T-1SBG484C Pinout","content":"# Connection from FGPA to Peripherals\n\nrelates to [[FPGA Board]]\n\nNotes\nPower\nVCCO - Vcco input refer to [[Power Subcircuit]]\nMGTAVTT - refer to [[Power Subcircuit]]\n\nJTAG\nTDI_0 - TDI\nTDIO_0 - TDO\nTCK_0 - TCK\nTMS_0 - TMS\n\nConfiguration\nCCLK_0 - configuration clock, this will be hooked into the SPI boot flash (May require termination)\nM0_0 - config pin (tie to Vcco)\nM1_0 - config pin (tie to GND)\nM2_0 - config pin (tie to GND)\n![[Pasted image 20210714174230.png]]\n\nMOSI/D\\[00\\] - Master out slave in to SPI\nDIN/D\\[01\\] - Master in slave out from SPI\nFCS_B - flash chip select, chip select for SPI specifically for configuration \n\nPUDC_B - enables pullups on IO pins during configuration, for pullups to be disabled on configuration tie to Vcco (tie low)\nEMCCLK - optional external clock input that can be forwarded to the CCLK (possibly use to limit clock frequency)\nCSI_B - Chip select configuration interface (high-z if not used) (high-z)\nCSO_B - Chip select output for daisy chaining FPGAs (high-z if not used) (high-z)\nDOUT - data output, (high-z if not used) (high-z)\n\nDONE_0 - open drain output, for if configuration has completed, run this through a LED for debug (active high)\nINIT_B_0 - open drain output, indicates initilization of configuration memory, must be connected by a pullup to VCCO (4.7k) (active low)\nPROGRAM_B_0 - Async reset for configuration (active low)\n\nCFGBVS_0 - selects the voltage level for IO, connect to Vcco for 3.3v, for 1.8v connect to GND\n\n\nGeneral IO\nAD(X)(P/N) - ADC Pin, X = channel num, (P/N) Positive negative differential\nIO - user input output\nL(X)(P/N) - Differential input, X = channel num, (P/N) Positive negative differential\nT0 - belongs to memory byte group 0-3 (not sure what this means)\nT(X)_DQS - DDR DQS Pin, X = byte group\n\nVP_0 - dedicated positive ADC input\nVN_0 - dedication negative ADC input\n\nDXN - positive differential output from chip temp sensor (Cathode)\nDXP - negative differential output from chip temp sensor (Annode)\n\nMGTPTXN(X) - GTP transciever tx, X = group num 0-3\nMGTPRXN(X) - GTP transciever rx, X = group num 0-3\n\n\n\n## Pinout\n| FPGA Pin | GPIO Pin |\n| -------- | -------- |\n| T3       | 1        |\n| T1       | 2        |\n| U2       |          |\n| V2       |          |\n| R3       |          |\n| R2       |          |\n| W2       |          |\n| Y2       |          |\n| W1       |          |\n| Y1       |          |\n| U3       |          |\n| V3       |          |\n| AA1      |          |\n| AB1      |          |\n| AB3      |          |\n| AB2      |          |\n| Y3       |          |\n| AA3      |          |\n| AA5      |          |\n| AB5      |          |\n| Y4       |          |\n| AA4      |          |\n| V4       |          |\n| W4       |          |\n|          |          |\n\n| FPGA Pin | Pin Name           | Function   | Hookup Notes | External Device Link |\n| -------- | ------------------ | ---------- | ------------ | -------------------- |\n| A1       | IO_L1N_T0_AD4N_35  | General IO |              |                      |\n| A2       | GND                |            |              |                      |\n| A3       | GND                |            |              |                      |\n| A4       | MGTPTXN0_216       | GTP TX 0   |              |                      |\n| A5       | GND                |            |              |                      |\n| A6       | MGTPTXN2_216       | GTP TX 2   |              |                      |\n| A7       | GND                |            |              |                      |\n| A8       | MGTPRXN0_216       | GTP RX 0   |              |                      |\n| A9       | GND                |            |              |                      |\n| A10      | MGTPRXN2_216       | GTP RX 2   |              |                      |\n| A11      | GND                |            |              |                      |\n| A12      | GND                |            |              |                      |\n| A13      | IO_L10P_T1_16      | General IO |              |                      |\n| A14      | IO_L10N_T1_16      | General IO |              |                      |\n| A15      | IO_L9P_T1_DQS_16   |            |              |                      |\n| A16      | IO_L9N_T1_DQS_16   |            |              |                      |\n| A17      | VCCO_16            | POWER      |              |                      |\n| A18      | IO_L17P_T2_16      | General IO |              |                      |\n| A19      | IO_L17N_T2_16      | General IO |              |                      |\n| A20      | IO_L16N_T2_16      | General IO |              |                      |\n| A21      | IO_L21N_T3_DQS_16  |            |              |                      |\n| A22      | GND                |            |              |                      |\n| B1       | IO_L1P_T0_AD4P_35  | General IO |              |                      |\n| B2       | IO_L2N_T0_AD12N_35 | General IO |              |                      |\n| B3       | GND                |            |              |                      |\n| B4       | MGTPTXP0_216       | GTP TX 0   |              |                      |\n| B5       | MGTAVTT            | POWER      |              |                      |\n| B6       | MGTPTXP2_216       | GTP TX 2   |              |                      |\n| B7       | MGTAVTT            | POWER      |              |                      |\n| B8       |                    |            |              |                      |\n| B9       | MGTAVTT            | POWER      |              |                      |\n| B10      | MGTPRXP2_216       | GTP RX 2   |              |                      |\n| B11      | MGTAVTT            | POWER      |              |                      |\n| B12      | IO_L7N_T1_13       | General IO |              |                      |\n| B13      | IO_L8N_T1_16       | General IO |              |                      |\n| B14      |                    |            |              |                      |\n| B15      |                    |            |              |                      |\n| B16      |                    |            |              |                      |\n| B17      |                    |            |              |                      |\n| B18      |                    |            |              |                      |\n| B19      |                    |            |              |                      |\n| B20      |                    |            |              |                      |\n| B21      |                    |            |              |                      |\n| B22      |                    |            |              |                      |\n| C1       |                    |            |              |                      |\n| C2       |                    |            |              |                      |\n| C3       |                    |            |              |                      |\n| C4       |                    |            |              |                      |\n| C5       |                    |            |              |                      |\n| C6       |                    |            |              |                      |\n| C7       |                    |            |              |                      |\n| C9       |                    |            |              |                      |\n| C10      |                    |            |              |                      |\n| C11      |                    |            |              |                      |\n| C12      |                    |            |              |                      |\n| C13      |                    |            |              |                      |\n| C14      |                    |            |              |                      |\n| C15      |                    |            |              |                      |\n| C16      |                    |            |              |                      |\n| C17      |                    |            |              |                      |\n| C18      |                    |            |              |                      |\n| C19      |                    |            |              |                      |\n| C20      |                    |            |              |                      |\n| C21      |                    |            |              |                      |\n| C22      |                    |            |              |                      |\n| D1       |                    |            |              |                      |\n| D2       |                    |            |              |                      |\n| D3       |                    |            |              |                      |\n| D4       |                    |            |              |                      |\n| D5       |                    |            |              |                      |\n| D6       |                    |            |              |                      |\n| D7       |                    |            |              |                      |\n| D9       |                    |            |              |                      |\n| D10      |                    |            |              |                      |\n| D11      |                    |            |              |                      |\n| D12      |                    |            |              |                      |\n| D13      |                    |            |              |                      |\n| D14      |                    |            |              |                      |\n| D15      |                    |            |              |                      |\n| D16      |                    |            |              |                      |\n| D17      |                    |            |              |                      |\n| D18      |                    |            |              |                      |\n| D19      |                    |            |              |                      |\n| D20      |                    |            |              |                      |\n| D21      |                    |            |              |                      |\n| D22      |                    |            |              |                      |\n| E1       |                    |            |              |                      |\n| E2       |                    |            |              |                      |\n| E3       |                    |            |              |                      |\n| E4       |                    |            |              |                      |\n| E5       |                    |            |              |                      |\n| E6       |                    |            |              |                      |\n| E7       |                    |            |              |                      |\n| E9       |                    |            |              |                      |\n| E10      |                    |            |              |                      |\n| E11      |                    |            |              |                      |\n| E12      |                    |            |              |                      |\n| E13      |                    |            |              |                      |\n| E14      |                    |            |              |                      |\n| E15      |                    |            |              |                      |\n| E16      |                    |            |              |                      |\n| E17      |                    |            |              |                      |\n| E18      |                    |            |              |                      |\n| E19      |                    |            |              |                      |\n| E20      |                    |            |              |                      |\n| E21      |                    |            |              |                      |\n| E22      |                    |            |              |                      |\n| F1       |                    |            |              |                      |\n| F2       |                    |            |              |                      |\n| F3       |                    |            |              |                      |\n| F4       |                    |            |              |                      |\n| F5       |                    |            |              |                      |\n| F6       |                    |            |              |                      |\n| F7       |                    |            |              |                      |\n| F9       |                    |            |              |                      |\n| F10      |                    |            |              |                      |\n| F11      |                    |            |              |                      |\n| F12      |                    |            |              |                      |\n| F13      |                    |            |              |                      |\n| F14      |                    |            |              |                      |\n| F15      |                    |            |              |                      |\n| F16      |                    |            |              |                      |\n| F17      |                    |            |              |                      |\n| F18      |                    |            |              |                      |\n| F19      |                    |            |              |                      |\n| F20      |                    |            |              |                      |\n| F21      |                    |            |              |                      |\n| F22      |                    |            |              |                      |\n| G1       |                    |            |              |                      |\n| G2       |                    |            |              |                      |\n| G3       |                    |            |              |                      |\n| G4       |                    |            |              |                      |\n| G5       |                    |            |              |                      |\n| G6       |                    |            |              |                      |\n| G7       |                    |            |              |                      |\n| G9       |                    |            |              |                      |\n| G10      |                    |            |              |                      |\n| G11      |                    |            |              |                      |\n| G12      |                    |            |              |                      |\n| G13      |                    |            |              |                      |\n| G14      |                    |            |              |                      |\n| G15      |                    |            |              |                      |\n| G16      |                    |            |              |                      |\n| G17      |                    |            |              |                      |\n| G18      |                    |            |              |                      |\n| G19      |                    |            |              |                      |\n| G20      |                    |            |              |                      |\n| G21      |                    |            |              |                      |\n| G22      |                    |            |              |                      |\n| H1       |                    |            |              |                      |\n| H2       |                    |            |              |                      |\n| H3       |                    |            |              |                      |\n| H4       |                    |            |              |                      |\n| H5       |                    |            |              |                      |\n| H6       |                    |            |              |                      |\n| H7       |                    |            |              |                      |\n| H9       |                    |            |              |                      |\n| H10      |                    |            |              |                      |\n| H11      |                    |            |              |                      |\n| H12      |                    |            |              |                      |\n| H13      |                    |            |              |                      |\n| H14      |                    |            |              |                      |\n| H15      |                    |            |              |                      |\n| H16      |                    |            |              |                      |\n| H17      |                    |            |              |                      |\n| H18      |                    |            |              |                      |\n| H19      |                    |            |              |                      |\n| H20      |                    |            |              |                      |\n| H21      |                    |            |              |                      |\n| H22      |                    |            |              |                      |\n| J1       |                    |            |              |                      |\n| J2       |                    |            |              |                      |\n| J3       |                    |            |              |                      |\n| J4       |                    |            |              |                      |\n| J5       |                    |            |              |                      |\n| J6       |                    |            |              |                      |\n| J7       |                    |            |              |                      |\n| J9       |                    |            |              |                      |\n| J10      |                    |            |              |                      |\n| J11      |                    |            |              |                      |\n| J12      |                    |            |              |                      |\n| J13      |                    |            |              |                      |\n| J14      |                    |            |              |                      |\n| J15      |                    |            |              |                      |\n| J16      |                    |            |              |                      |\n| J17      |                    |            |              |                      |\n| J18      |                    |            |              |                      |\n| J19      |                    |            |              |                      |\n| J20      |                    |            |              |                      |\n| J21      |                    |            |              |                      |\n| J22      |                    |            |              |                      |\n| K1       |                    |            |              |                      |\n| K2       |                    |            |              |                      |\n| K3       |                    |            |              |                      |\n| K4       |                    |            |              |                      |\n| K5       |                    |            |              |                      |\n| K6       |                    |            |              |                      |\n| K7       |                    |            |              |                      |\n| K9       |                    |            |              |                      |\n| K10      |                    |            |              |                      |\n| K11      |                    |            |              |                      |\n| K12      |                    |            |              |                      |\n| K13      |                    |            |              |                      |\n| K14      |                    |            |              |                      |\n| K15      |                    |            |              |                      |\n| K16      |                    |            |              |                      |\n| K17      |                    |            |              |                      |\n| K18      |                    |            |              |                      |\n| K19      |                    |            |              |                      |\n| K20      |                    |            |              |                      |\n| K21      |                    |            |              |                      |\n| K22      |                    |            |              |                      |\n| L1       |                    |            |              |                      |\n| L2       |                    |            |              |                      |\n| L3       |                    |            |              |                      |\n| L4       |                    |            |              |                      |\n| L5       |                    |            |              |                      |\n| L6       |                    |            |              |                      |\n| L7       |                    |            |              |                      |\n| L9       |                    |            |              |                      |\n| L10      |                    |            |              |                      |\n| L11      |                    |            |              |                      |\n| L12      |                    |            |              |                      |\n| L13      |                    |            |              |                      |\n| L14      |                    |            |              |                      |\n| L15      |                    |            |              |                      |\n| L16      |                    |            |              |                      |\n| L17      |                    |            |              |                      |\n| L18      |                    |            |              |                      |\n| L19      |                    |            |              |                      |\n| L20      |                    |            |              |                      |\n| L21      |                    |            |              |                      |\n| L22      |                    |            |              |                      |\n| M1       |                    |            |              |                      |\n| M2       |                    |            |              |                      |\n| M3       |                    |            |              |                      |\n| M4       |                    |            |              |                      |\n| M5       |                    |            |              |                      |\n| M6       |                    |            |              |                      |\n| M7       |                    |            |              |                      |\n| M9       |                    |            |              |                      |\n| M10      |                    |            |              |                      |\n| M11      |                    |            |              |                      |\n| M12      |                    |            |              |                      |\n| M13      |                    |            |              |                      |\n| M14      |                    |            |              |                      |\n| M15      |                    |            |              |                      |\n| M16      |                    |            |              |                      |\n| M17      |                    |            |              |                      |\n| M18      |                    |            |              |                      |\n| M19      |                    |            |              |                      |\n| M20      |                    |            |              |                      |\n| M21      |                    |            |              |                      |\n| M22      |                    |            |              |                      |\n| N1       |                    |            |              |                      |\n| N2       |                    |            |              |                      |\n| N3       |                    |            |              |                      |\n| N4       |                    |            |              |                      |\n| N5       |                    |            |              |                      |\n| N6       |                    |            |              |                      |\n| N7       |                    |            |              |                      |\n| N9       |                    |            |              |                      |\n| N10      |                    |            |              |                      |\n| N11      |                    |            |              |                      |\n| N12      |                    |            |              |                      |\n| N13      |                    |            |              |                      |\n| N14      |                    |            |              |                      |\n| N15      |                    |            |              |                      |\n| N16      |                    |            |              |                      |\n| N17      |                    |            |              |                      |\n| N18      |                    |            |              |                      |\n| N19      |                    |            |              |                      |\n| N20      |                    |            |              |                      |\n| N21      |                    |            |              |                      |\n| N22      |                    |            |              |                      |\n| P1       |                    |            |              |                      |\n| P2       |                    |            |              |                      |\n| P3       |                    |            |              |                      |\n| P4       |                    |            |              |                      |\n| P5       |                    |            |              |                      |\n| P6       |                    |            |              |                      |\n| P7       |                    |            |              |                      |\n| P9       |                    |            |              |                      |\n| P10      |                    |            |              |                      |\n| P11      |                    |            |              |                      |\n| P12      |                    |            |              |                      |\n| P13      |                    |            |              |                      |\n| P14      |                    |            |              |                      |\n| P15      |                    |            |              |                      |\n| P16      |                    |            |              |                      |\n| P17      |                    |            |              |                      |\n| P18      |                    |            |              |                      |\n| P19      |                    |            |              |                      |\n| P20      |                    |            |              |                      |\n| P21      |                    |            |              |                      |\n| P22      |                    |            |              |                      |\n| R1       |                    |            |              |                      |\n| R2       |                    |            |              |                      |\n| R3       |                    |            |              |                      |\n| R4       |                    |            |              |                      |\n| R5       |                    |            |              |                      |\n| R6       |                    |            |              |                      |\n| R7       |                    |            |              |                      |\n| R9       |                    |            |              |                      |\n| R10      |                    |            |              |                      |\n| R11      |                    |            |              |                      |\n| R12      |                    |            |              |                      |\n| R13      |                    |            |              |                      |\n| R14      |                    |            |              |                      |\n| R15      |                    |            |              |                      |\n| R16      |                    |            |              |                      |\n| R17      |                    |            |              |                      |\n| R18      |                    |            |              |                      |\n| R19      |                    |            |              |                      |\n| R20      |                    |            |              |                      |\n| R21      |                    |            |              |                      |\n| R22      |                    |            |              |                      |\n| T1       |                    |            |              |                      |\n| T2       |                    |            |              |                      |\n| T3       |                    |            |              |                      |\n| T4       |                    |            |              |                      |\n| T5       |                    |            |              |                      |\n| T6       |                    |            |              |                      |\n| T7       |                    |            |              |                      |\n| T9       |                    |            |              |                      |\n| T10      |                    |            |              |                      |\n| T11      |                    |            |              |                      |\n| T12      |                    |            |              |                      |\n| T13      |                    |            |              |                      |\n| T14      |                    |            |              |                      |\n| T15      |                    |            |              |                      |\n| T16      |                    |            |              |                      |\n| T17      |                    |            |              |                      |\n| T18      |                    |            |              |                      |\n| T19      |                    |            |              |                      |\n| T20      |                    |            |              |                      |\n| T21      |                    |            |              |                      |\n| T22      |                    |            |              |                      |\n| U1       |                    |            |              |                      |\n| U2       |                    |            |              |                      |\n| U3       |                    |            |              |                      |\n| U4       |                    |            |              |                      |\n| U5       |                    |            |              |                      |\n| U6       |                    |            |              |                      |\n| U7       |                    |            |              |                      |\n| U9       |                    |            |              |                      |\n| U10      |                    |            |              |                      |\n| U11      |                    |            |              |                      |\n| U12      |                    |            |              |                      |\n| U13      |                    |            |              |                      |\n| U14      |                    |            |              |                      |\n| U15      |                    |            |              |                      |\n| U16      |                    |            |              |                      |\n| U17      |                    |            |              |                      |\n| U18      |                    |            |              |                      |\n| U19      |                    |            |              |                      |\n| U20      |                    |            |              |                      |\n| U21      |                    |            |              |                      |\n| U22      |                    |            |              |                      |\n| V1       |                    |            |              |                      |\n| V2       |                    |            |              |                      |\n| V3       |                    |            |              |                      |\n| V4       |                    |            |              |                      |\n| V5       |                    |            |              |                      |\n| V6       |                    |            |              |                      |\n| V7       |                    |            |              |                      |\n| V9       |                    |            |              |                      |\n| V10      |                    |            |              |                      |\n| V11      |                    |            |              |                      |\n| V12      |                    |            |              |                      |\n| V13      |                    |            |              |                      |\n| V14      |                    |            |              |                      |\n| V15      |                    |            |              |                      |\n| V16      |                    |            |              |                      |\n| V17      |                    |            |              |                      |\n| V18      |                    |            |              |                      |\n| V19      |                    |            |              |                      |\n| V20      |                    |            |              |                      |\n| V21      |                    |            |              |                      |\n| V22      |                    |            |              |                      |\n| W1       |                    |            |              |                      |\n| W2       |                    |            |              |                      |\n| W3       |                    |            |              |                      |\n| W4       |                    |            |              |                      |\n| W5       |                    |            |              |                      |\n| W6       |                    |            |              |                      |\n| W7       |                    |            |              |                      |\n| W9       |                    |            |              |                      |\n| W10      |                    |            |              |                      |\n| W11      |                    |            |              |                      |\n| W12      |                    |            |              |                      |\n| W13      |                    |            |              |                      |\n| W14      |                    |            |              |                      |\n| W15      |                    |            |              |                      |\n| W16      |                    |            |              |                      |\n| W17      |                    |            |              |                      |\n| W18      |                    |            |              |                      |\n| W19      |                    |            |              |                      |\n| W20      |                    |            |              |                      |\n| W21      |                    |            |              |                      |\n| W22      |                    |            |              |                      |\n| Y1       |                    |            |              |                      |\n| Y2       |                    |            |              |                      |\n| Y3       |                    |            |              |                      |\n| Y4       |                    |            |              |                      |\n| Y5       |                    |            |              |                      |\n| Y6       |                    |            |              |                      |\n| Y7       |                    |            |              |                      |\n| Y9       |                    |            |              |                      |\n| Y10      |                    |            |              |                      |\n| Y11      |                    |            |              |                      |\n| Y12      |                    |            |              |                      |\n| Y13      |                    |            |              |                      |\n| Y14      |                    |            |              |                      |\n| Y15      |                    |            |              |                      |\n| Y16      |                    |            |              |                      |\n| Y17      |                    |            |              |                      |\n| Y18      |                    |            |              |                      |\n| Y19      |                    |            |              |                      |\n| Y20      |                    |            |              |                      |\n| Y21      |                    |            |              |                      |\n| Y22      |                    |            |              |                      |\n| AA1      |                    |            |              |                      |\n| AA2      |                    |            |              |                      |\n| AA3      |                    |            |              |                      |\n| AA4      |                    |            |              |                      |\n| AA5      |                    |            |              |                      |\n| AA6      |                    |            |              |                      |\n| AA7      |                    |            |              |                      |\n| AA9      |                    |            |              |                      |\n| AA10     |                    |            |              |                      |\n| AA11     |                    |            |              |                      |\n| AA12     |                    |            |              |                      |\n| AA13     |                    |            |              |                      |\n| AA14     |                    |            |              |                      |\n| AA15     |                    |            |              |                      |\n| AA16     |                    |            |              |                      |\n| AA17     |                    |            |              |                      |\n| AA18     |                    |            |              |                      |\n| AA19     |                    |            |              |                      |\n| AA20     |                    |            |              |                      |\n| AA21     |                    |            |              |                      |\n| AA22     |                    |            |              |                      |\n| AB1      |                    |            |              |                      |\n| AB2      |                    |            |              |                      |\n| AB3      |                    |            |              |                      |\n| AB4      |                    |            |              |                      |\n| AB5      |                    |            |              |                      |\n| AB6      |                    |            |              |                      |\n| AB7      |                    |            |              |                      |\n| AB9      |                    |            |              |                      |\n| AB10     |                    |            |              |                      |\n| AB11     |                    |            |              |                      |\n| AB12     |                    |            |              |                      |\n| AB13     |                    |            |              |                      |\n| AB14     |                    |            |              |                      |\n| AB15     |                    |            |              |                      |\n| AB16     |                    |            |              |                      |\n| AB17     |                    |            |              |                      |\n| AB18     |                    |            |              |                      |\n| AB19     |                    |            |              |                      |\n| AB20     |                    |            |              |                      |\n| AB21     |                    |            |              |                      |\n| AB22     |                    |            |              |                      |\n\n\n\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/FPGA-Board":{"title":"FPGA Board","content":"\t[[Top Level Electrical]]\n\n# FPGA Board\n\n### Main Components\n- SODIMM 204 pin DDR3 ram stick  [[Corsair DDR3L]]\n- Flash memory 32M SPI Flash [[SPI Memory]]\n- 100Mhz Clock\n- Boot SPI flash plugs in through right angle PCI connector\n- XC7A200T-1SBG484C Artix-7 FPGA\n- M.2 connection to motherboard\n\n## A200T Info\nOUT OF DATE NO LONGER USING THIS PART\nXC7A200T-2FBG484I  Industrial -2 speed grade\nJLC#: C494680\n\nXC7A200T-1SBG484C Commerical -1 speed grade\nSourced from Mouser $350 w/ tax\n\n![[ds181_Artix_7_Data_Sheet 1.pdf]]\n\n## FPGA Pinouts\n\nFPGA Pinout (top level connection)\n[[FPGA AC7A200T-1SBG484C Pinout]]\n\nDDR3L SODIMM RAM (CMSO4GX3M1C1600C11)\n [[DDR3 to FPGA connection]]\n \n SPI Flash (non volatile storage)\n [[SPI to FPGA Connection]]\n\nM.2 Connection\n[[Motherboard to FPGA Connection]]\n\nBoot SPI to M.2 to FPGA connection\n[[Boot SPI to FPGA connection]]\n\n## Schematic\n![[Pasted image 20210226184506.png]]\n![[Pasted image 20210228130613.png]]\n## Voltage Rails\n### DDR3 RAM\n| Rail   | Voltage | Current | Notes                                | Min/Max       | %   |\n| ------ | ------- | ------- | ------------------------------------ | ------------- | --- |\n| Vdd    | 1.5V    | 2.3A    | current is peak and varies by module | 1.425 - 1.575 | 5%  |\n| Vddspd | 3.3V    | 2mA     | likely won't be hooked up            |               |     |\n| Vrefca | 0.75V   | 18uA    |                                      | 0.735 - 0.765 | 2%  |\n| Vrefdq | 0.75V   | 18uA    |                                      | 0.735 - 0.765 | 2%  |\n| Vtt    | 0.75V   | 600mA   | specifies a min I of -600mA          | 0.735 - 0.765 | 2%  |\n\n### A200T FPGA\nfor more accurate current values use the XPE (xilinx power estimator)\n\nFOR XC7A200T-1SBG484C (1C)\n| Rail     | Voltage | Current     | Notes                        | Min/Max      | %    |\n| -------- | ------- | ----------- | ---------------------------- | ------------ | ---- |\n| Vccint   | 1V      | 328mA       | dependent on speed grade     | 0.95 - 1.05V | 5%   |\n| Vccaux   | 1.8V    | 73mA        |                              | 1.71 - 1.89  | 5%   |\n| Vccbram  | 1V      | 11mA        | dependent on speed grade     | 0.95 - 1.05V | 5%   |\n| Vcco     | 3.3v    | 5mA         |                              | 1.14 - 3.465 | 5%   |\n| Vin      | 3.3V    | 10mA x pins | this is the I/O sink voltage | -0.2 - 3.5   | 6%   |\n| Vccbat   | 0V      |             |                              |              |      |\n| Vmgtavcc | 1V      | 12mA        | Requires special filtering   | 0.97 - 1.03  | 3%   |\n| Vmgtavtt | 1.2V    | 12mA        | Requires special filtering   | 1.17 - 1.23  | 2.5% |\n| Vccadc   | 1.8V    |             |                              | 1.71 - 1.89  | 5%   |\n| Vrefp    | 1.25V   | 15uA        |                              | 1.2-1.3      | 4%   |\n\nFOR XC7A200T-2FBG484I (2I)\n| Rail     | Voltage | Current     | Notes                        | Min/Max      | %    |\n| -------- | ------- | ----------- | ---------------------------- | ------------ | ---- |\n| Vccint   | 1V      | 328mA       | dependent on speed grade     | 0.95 - 1.05V | 5%   |\n| Vccaux   | 1.8V    | 73mA        |                              | 1.71 - 1.89  | 5%   |\n| Vccbram  | 1V      | 11mA        | dependent on speed grade     | 0.95 - 1.05V | 5%   |\n| Vcco     | 3.3v    | 5mA         |                              | 1.14 - 3.465 | 5%   |\n| Vin      | 3.3V    | 10mA x pins | this is the I/O sink voltage | -0.2 - 3.5   | 6%   |\n| Vccbat   | 0V      |             |                              |              |      |\n| Vmgtavcc | 1V      | 12mA        | Requires special filtering   | 0.97 - 1.03  | 3%   |\n| Vmgtavtt | 1.2V    | 12mA        | Requires special filtering   | 1.17 - 1.23  | 2.5% |\n| Vccadc   | 1.8V    |             |                              | 1.71 - 1.89  | 5%   |\n| Vrefp    | 1.25V   | 15uA        |                              | 1.2-1.3      | 4%   |\n\ncapacitor requirements\n![[Pasted image 20221022230442.png]]\ncap specs\n![[Pasted image 20221022230642.png]]\nbody size is just an upper bound so I'll def go smaller\n\nSee below for special filtering requirements on Vmgtavcc and Vmgtavtt\n![[ug482_7Series_GTP_Transceivers-2 1.pdf]]","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/FPGA-Clock":{"title":"FPGA Clock","content":"# FPGA Clock\n[[FPGA Board]]\n100Mhz clock\ncopy same clock as the one from the Alchitry\n\n**TODO**","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/Motherboard-to-FPGA-Connection":{"title":"Motherboard to FPGA Connection","content":"# Connection from FGPA to Motherboard\n\nrelates to [[FPGA Board]]\n\npower (17)\ngnd - 6 pin\n1v - 4 pin\n1v2 - 2 pin\n1v25 - 1 pin\n1v8 - 2 pin\n3v3 - 2 pin\n\nBoot memory (6)\nJTAG (4)\nswitches (11)\nled drivers (7)\ndisplay (27)\n\nOther (132)\n\n\n## Pinout\n| Pin Name | SODIMM Pin | FPGA Pin | Function |\n| -------- | ---------- | -------- | -------- |\n| 1v       | 1          |          |          |\n| 1v       | 2          |          |          |\n| 1v       | 3          |          |          |\n| 1v       | 4          |          |          |\n| gnd      | 5          |          |          |\n| gnd      | 6          |          |          |\n| 1v2      | 7          |          |          |\n| 1v2      | 8          |          |          |\n| gnd      | 9          |          |          |\n| gnd      | 10         |          |          |\n| 1v8      | 11         |          |          |\n| 1v8      | 12         |          |          |\n| gnd      | 13         |          |          |\n| gnd      | 14         |          |          |\n| 3v3      | 15         |          |          |\n| 3v3      | 16         |          |          |\n| gnd      | 17         |          |          |\n| TMS      | 18         |          |          |\n| 1v25     | 19         |          |          |\n| TDI      | 20         |          |          |\n| TCK      | 21         |          |          |\n| TDO      | 22         |          |          |\n| gnd      | 23         |          |          |\n| gnd      | 24         |          |          |\n| FCS      | 25         |          |          |\n| CCLK     | 26         |          |          |\n| MISO     | 27         |          |          |\n| MOSI     | 28         |          |          |\n| D2       | 29         |          |          |\n| D3       | 30         |          |          |\n| gnd      | 31         |          |          |\n| gnd      | 32         |          |          |\n| R0       | 33         |          |          |\n| R1       | 34         |          |          |\n| R2       | 35         |          |          |\n| R3       | 36         |          |          |\n| R4       | 37         |          |          |\n| R5       | 38         |          |          |\n| R6       | 39         |          |          |\n| R7       | 40         |          |          |\n| G0       | 41         |          |          |\n| G1       | 42         |          |          |\n| G2       | 43         |          |          |\n| G3       | 44         |          |          |\n| G4       | 45         |          |          |\n| G5       | 46         |          |          |\n| G6       | 47         |          |          |\n| G7       | 48         |          |          |\n| B0       | 49         |          |          |\n| B1       | 50         |          |          |\n| B2       | 51         |          |          |\n| B3       | 52         |          |          |\n| B4       | 53         |          |          |\n| B5       | 54         |          |          |\n| B6       | 55         |          |          |\n| B7       | 56         |          |          |\n| VS       | 57         |          |          |\n| gnd      | 58         |          |          |\n| HS       | 59         |          |          |\n| DCLK     | 60         |          |          |\n| gnd      | 61         |          |          |\n| gnd      | 62         |          |          |\n| HSG0     | 63         |          |          |\n| HSG1     | 64         |          |          |\n| HSG2     | 65         |          |          |\n| HSG3     | 66         |          |          |\n| LSG0     | 67         |          |          |\n| LSG1     | 68         |          |          |\n| LSG2     | 69         |          |          |\n| SWH0     | 70         |          |          |\n| SWH1     | 71         |          |          |\n| SWH2     | 72         |          |          |\n| SWH3     | 73         |          |          |\n| SWH4     | 74         |          |          |\n| SWH5     | 75         |          |          |\n| SWL0     | 76         |          |          |\n| SWL1     | 77         |          |          |\n| SWL2     | 78         |          |          |\n| SWL3     | 79         |          |          |\n| SWL4     | 80         |          |          |\n| gnd      | 81         |          |          |\n| gnd      | 82         |          |          |\n|          |            |          |          |\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/SPI-Memory":{"title":"SPI Memory","content":"# FPGA SPI Memory\n\nbelongs to [[FPGA Board]]\n\nSPI memory acts as storage for data that isn't volatile like the RAM. Current part selected is the cypress semiconductor 2Gb (256M x 8).\n\nP/N: S34ML02G200TFA000\n\ndigikey https://www.digikey.ca/en/products/detail/cypress-semiconductor-corp/S34ML02G200TFA000/7320277\ndatasheet (issues getting this)","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/FPGA/SPI-to-FPGA-Connection":{"title":"SPI to FPGA Connection","content":"# Connection from FGPA to SPI\n\nrelates to [[FPGA Board]]\n\n## Pinout\n| Pin Name | SPI Pin | FPGA Pin | Function |\n| -------- | ------- | -------- | -------- |\n|          |         |          |          |\n|          |         |          |          |","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/LCD-Display":{"title":"LCD Display","content":"# LCD Display\n[[Motherboard]]\n\n\n## Power\n\n| Rail      | Voltage | Current | Notes                    |\n| --------- | ------- | ------- | ------------------------ |\n| Vcc       | 3v3     | 5mA     | 5mA should be peak       |\n| Backlight | 5v      | 30mA    | should be lower than 30mA |\n\nCurrent Display ![[2032020d-1dc4-4283-95de-47f034540884.pdf]]\nP/N: 4DLCD-43480272\nhttps://www.mouser.ca/ProductDetail/971-4DLCD-43480272/\n\nSpecs\n24bit colour\nResolution: 480 x 272\nOuter Dimension: 105mm x 67.2mm\n\nConnection\n40 pin ribbon\n\nFPGA Lines (27)\n24 lines for colour\n3 lines (HSync, VSync, DClk)\n\nMotherboard Lines (5)\nGND\n5v (used for backlight)\n3v3 (needed for display (logic level))\nDE, DISP","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/Motherboard":{"title":"Motherboard","content":"# Motherboard\n\n## Subsystems\n![[Pasted image 20210228152845.png]]\n\n### Connection to FPGA Board\n[[FPGA Board]]\n- Connected over M.2 (will require multiple)\n- Switch inputs (21 Lines)\n- RGB LEDs (63 Lines)\n- Power\n- PCIE Boot card\n- Display (27 Lines)\n\n### Power **Break this out into it's own document**\n\n\nBattery Management\n- Charge\n- Balance (if multiple cells)\n- Undervoltage protection (power down)\n- Charge percentage\n\n**TODO Select Battery**\n\n**RAILS**\n\nFPGA Rails\n[[FPGA Board]]\n\n| Rail     | Voltage | Current |\n| -------- | ------- | ------- |\n| Vccint   | 1V      | 328mA   |\n| Vccaux   | 1.8V    | 73mA    |\n| Vccbram  | 1V      | 11mA    |\n| Vcco     | 3.3v    | 5mA     |\n| Vccbat   | 0V      |         |\n| Vmgtavcc | 1V      | 12mA    |\n| Vmgtavtt | 1.2V    | 12mA    |\n| Vccadc   | 1.8V    |         |\n| Vrefp    | 1.25V   | 15uA    |\n\nRAM Rails\n[[FPGA Board]]\n\n| Rail   | Voltage | Current | Notes                                |\n| ------ | ------- | ------- | ------------------------------------ |\n| Vdd    | 1.5V    | 2.3A    | current is peak and varies by module |\n| Vddspd | 3.3V    | 2mA     | likely won't be hooked up            |\n| Vrefca | 0.75V   | 18uA    |                                      |\n| Vrefdq | 0.75V   | 18uA    |                                      |\n| Vtt    | 0.75V   | 600mA   | specifies a min I of -600mA          |\n\nDisplay Rails\n[[LCD Display]]\n\n| Rail      | Voltage | Current | Notes                    |\n| --------- | ------- | ------- | ------------------------ |\n| Vcc       | 3v3     | 5mA     | 5mA should be peak       |\n| Backlight | 5v      | 30mA    | should be lowe than 30mA |\n\nLED Driver Rails\n[[LED + Driver]]\n\n| Rail | Voltage | Current | Notes                  |\n| ---- | ------- | ------- | ---------------------- |\n| Vcc  | 5V      | 0.5A    | each led is peak 110mA |\n\n### LED + Driver\n[[LED + Driver]]\n- one RGB LED per switch (21 RGB LEDs 63 LEDs (21 x 3)) (consider driving with a decoder and charlieplexed array)\n- Additional RGB around the design\n\n### Wireless Charger\n- Qi Charging \n\n### LCD Display\n- Serial control from FPGA\n- Clock generated by FPGA\n\n### Ribbon Expansion\n- Ability to add a coprocessor (microcontroller)\n- Ability to add an ADC\n\n### PCIE Boot\n- EEPROM bootcard \n- ability to flash cards from vivado\n- easily swapped in and out\n\n### Switches\n- 21 switches\n- Reed switch for power on power off (switch using a MOSFET)\n- whatever is required to get the switches to interact with the FPGA properly\n\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/Power-Subcircuit":{"title":"Power Subcircuit","content":"# Power Subcircuit\n\n## Battery and BMS\n### Battery\n\nFlat celled LIPO either 2s with bucks or 1s and boost for 5V line\n2 cell for 8.4V max 6.6V min\n\nLooking at using two of these\nhttps://www.adafruit.com/product/328\n\nMax discharge 1.5A @ 7V this is 10.5W\n\n### BMS\n\nTakes voltage in from possibly multiple sources must take these two inputs\nplus the batteries and provide a consistent output\n\nVin - 10V \n\n\n## Power Converters\n### Power Monitoring\nAll lines need to be monitored for voltage and current so that's 8 rails\n\nvoltage into the buck converter and current also need to be monitored for 9 total rails\n\n\n\n### Regulators\n#### Sequencing\npower supplies are sequenced (Vccint + Vccbram) -\u003e (Vccaux) -\u003e (Vcco)\n\n1V -\u003e 1.8V -\u003e 3.3V\n\n5V is fed into PVIN3\n\n(1V comes up as 5V comes up)\nTRKSS1 -\u003e softstarts on 2200pf cap\nTRKSS2 -\u003e held low\nRUN3 -\u003e held low\nRUN4 -\u003e held low\n\n(1.8V comes up)\nTRKSS1 -\u003e started\nTRKSS2 -\u003e held low\nRUN3 -\u003e pulled high as 5V comes up\nRUN4 -\u003e held low\n\n(3.3V comes up)\nTRKSS1 -\u003e started\nTRKSS2 -\u003e softstarts once PG3 high \nRUN3 -\u003e started\nRUN4 -\u003e held low\n\n(1.5V comes up)\nTRKSS1 -\u003e started\nTRKSS2 -\u003e started\nRUN3 -\u003e started\nRUN4 -\u003e pulled high as 3.3V comes up\n\n\n#### Rails\n\n| Voltage | Current | Target Current | FPGA Rails                | RAM Rails | Display Rails | LED Driver Rails | notes |\n| ------- | ------- | -------------- | ------------------------- | --------- | ------------- | ---------------- | ----- |\n| 1V      | 350mA   | 500mA          | Vccint, Vccbram, Vmgtavcc |           |               |                  | 3%    |\n| 1.8V    | 73mA    | 250mA          | Vccaux, Vccadc            |           |               |                  | 5%    |\n| 3.3v    | 12mA    | 250mA          | Vcco                      | Vddspd    | Vcc           |                  | 5%    |\n| 1.2V    | 12mA    | 100mA          | Vmgtavtt                  |           |               |                  | 2.5%  |\n| 1.25V   | 15uA    | 20uA           | Vrefp                     |           |               |                  | 4%    |\n| 1.5V    | 2.3A    | 3A             |                           | Vdd       |               |                  | 5%    |\n| 0.75V   | 610mA   | 1A             |                           | Vtt       |               |                  | 2%    |\n| 5V      | 530mA   | 1A             |                           |           | Backlight     | Vcc              | 5%    |\n\n\nTotal Current Draw -\u003e 6.25A\nTotal Power -\u003e 12.3075W\n\nRegulator setup\n5v (Buck) 1A\n\n3.3v (Buck) 1A (+2A)\n| 0.75V (Linear special IC) 0.5A\n| 1.2V (Linear) 0.1A\n| 1V (Linear) 0.5A\n\n1.8v (Buck) 0.25A\n\n1.5V (Buck) 2.5A\n| 1.25V (Zener Shunt) 20uA\n\n4 channel buck IC \nLT8602\n\nproduces the following rails\n5v @ 1A\n3.3v -\u003e feeds into 1.5v and 1.8v\n1.5v \n1.8v\n\nLinear reg IC\nMIC69153\n\nADJ - 0.5v\nFLG - pullup if low that means theres an error\nVin - 1.8v\nEn - 1.8v\nCout - 10uf (X7R)\nCin - 10uf\n\n\n## Wireless Charging Circuit\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/BigCreteCalculator/V3/Electrical-Design-V3/Top-Level-Electrical":{"title":"Top Level Electrical","content":"# Top Level Electrical\n*outlines the eletrical design of V13\n\nrefer to \n[[Design Journal]]\nfor status of everything, below is a top level overview of tasks and roughly where they stand\n\n### Boards\n- Motherboard (primary board) [[Motherboard]]\n- [[FPGA Board]] (over M.2)\n- FPGA config board (over PCIE x1)\n- Potential expansion through a ribbon connector (external boards outside scope of V1 design)\n\n## TODO\n### Documentation / Design\n- Create pinout for M.2\n- Start rough sketches of physical design\n- Create master BOM in excel\n- Create active BOM in Altium\n\n### RTL\n- Generate template with simple example code to determine IO\n- Estimate power with some form of reasonably complex example code\n\n### Prototype Boards\n- Power delivery (items below could be designed as seperate dev boards)\n\t- should contain all the required rails (that are on the motherboard)\n\t- wireless charging circuitry\n\t- battery control circuitry\n- LED Driver + switches (acts as board to verify mechanical) **should be designed following holo circuit** [[LED + Driver]]\n- RAM SPD breakout (allow for ram specs to be verified) **V1 made follows the DDR3L standard not DDR3 needs to be redone**\n- Display driver (allows selection of LCD) **DONE** **needs to be ordered**\n- Boot card (test gold fingers and signal integrity)\n\n","lastmodified":"2023-06-26T13:32:19.703905682Z","tags":[]},"/Blogs/What-makes-a-good-blog":{"title":"Untitled Page","content":"---\ntitle: \"What makes a good blog?\"\ndraft: \"false\"\nlayout: \"Blogs\"\n---\n\nHiya neighbour, welcome to the Big Crete Engineering blog. As the first post, this will act as an introduction to Big Crete, \nwho I am, and what to expect from my blog. This will be the first of many blog posts covering a range of topics from my \npersonal life to engineering.\n\n[//]: # (\u003cimg class=\"center-picture sixty-per\" src=\"./Assets/Icons/mrRogers.jpeg\"\u003e)\n\n### What is Big Crete?\n\nTo fully understand what Big Crete is, I first need to give some background on my personal approach to engineering and \nthe role it plays in my life. I have been passionate about engineering for as long as I can remember and is the primary \nlens through which I view the world. Just a warning what comes next is purely philosophical I am by no means a \nphilosopher so it might just sound like a garbled unintelligible mess.\n\nAll living things on this planet are faced with hardship and challenge. The downfall for of a finite universe means \nfinite resources and as a result all living creatures will face the challenge this presents. Whether that be predators \nwho see your species as a recourse or the actual materials around you there is always a limit that creatures are trying \nto push beyond, in the futile goal of infinite population and lifespans. This is the major driver of life on earth and \nthrough the process of evolution animals pursue this goal, for humans we are quite the same. Unlike most living beings \nhumanity is in a unique position where we can artificially evolve through technology, actively shaping the world around\nus to improve our conditions and lives at a pace that puts traditional genetic evolution to shame. All people are \nindebted to those who came before producing the technologies and ideas required to make our lives that much easier and \nenjoyable. But even where we stand today on the shoulders of giants, we still yearn to break free from the shackles of \na finite universe to fill our infinite appetite. Whether or not we will reach this ideal is a different conversation\naltogether. To me there is nothing more noble someone can do during their time here than to try and contribute to \nsociety and help to improve the lives of others not only today but tomorrow and beyond. Scientists, engineers, \nmathematicians, philosophers, and many others pursue this goal endlessly. To me engineering in its purest is leveraging \nour understanding of the world around us to practically create things that improve the lives of others. Thats not to \nsay that engineering is the only way to pursue this goal, the structure of our society, market systems, culture are all \ncontributors to enabling the world around us. So as much as I hate to say it yes politicians are pursuing the noble goal \nof better distributing resources to those who need it to enable an improved future for all (at least in theory) in \npractice this is not always the case.\n\nThere is an adage give a man a fish, and you feed him for a day. Teach a man to fish you feed him for a lifetime. \nI think we should expand upon this: Engineer the tools for him to catch more than any man before and you feed his town \nforever (but of course a finite world means eventually you could fish beyond what the ocean supplies). I enjoy my work \nbecause it allows me as one person to improve the lives of populations for time to come. The job of the engineer is to \nbe creative and find solutions to the biggest problems we face, ultimately engineers are problem solvers leveraging all \nthe knowledge we have accumulated building things that push humanity forward.\n\nSo, circling this back to Big Crete, my passion for engineering and creating things. You now understand my passion and \nmy drive. Most engineering is done within companies who produce solutions for the world, this means that companies have \ntaken the time to figure out how to brand and become recognizable, we can relate to a company just like how we can \nrelate to individuals. My hope is that branding my projects under the Big Crete name as if it were a company will give \nit a life bigger than me and maybe lend it more credibility.\n\n### Cool story bro, what about the name?\nWell, the name is mostly an inside joke but basically it has nothing to do with engineering and is a slang version of \nconcrete. But from there it has taken on more meaning, combining the name with a construction themed logo is meant to \nconvey what Im all about which is building things. Just like how concrete is an iconic technology of the modern world \nwe live in, I hope that Big Crete will stand for projects equally as pivotal (unlikely, but a boy can dream).\n\nI also want to thank Clayton Haight (clayhaight.com) who graciously open sourced his blog format and agreed to let me \nuse it for my own. So, if you are interested in making your own blog and want an easy starting point to feel free to \ncopy this format but make sure to credit Clayton not myself.\n\nSo welcome to Big Crete, make yourself at home and be sure to check in often and feel free to reach out, Id love to chat.","lastmodified":"2023-06-26T13:32:19.707905743Z","tags":[]},"/backup":{"title":" Quartz 3.3","content":"\nHost your second brain and [digital garden](https://jzhao.xyz/posts/networked-thought) for free. Quartz features\n\n1. Extremely fast natural-language [[notes/search]]\n2. Customizable and hackable design based on [Hugo](https://gohugo.io/)\n3. Automatically generated backlinks, link previews, and local graph\n4. Built-in [[notes/CJK + Latex Support () | CJK + Latex Support]] and [[notes/callouts | Admonition-style callouts]]\n5. Support for both Markdown Links and Wikilinks\n\nCheck out some of the [amazing gardens that community members](notes/showcase.md) have published with Quartz or read about [why I made Quartz](notes/philosophy.md) to begin with.\n\n## Get Started\n\u003e  Step 1: [Setup your own digital garden using Quartz](notes/setup.md)\n\nReturning user? Figure out how to [[notes/updating|update]] your existing Quartz garden.\n\nIf you prefer browsing the contents of this site through a list instead of a graph, you see a list of all [setup-related notes](/tags/setup).\n\n### Troubleshooting\n-  [Troubleshooting and FAQ](notes/troubleshooting.md)\n-  [Submit an Issue](https://github.com/jackyzha0/quartz/issues)\n-  [Discord Community](https://discord.gg/cRFFHYye7t)\n\n","lastmodified":"2023-06-26T13:32:19.707905743Z","tags":[]}}